<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 17 Case study - Rohan’s books | Telling Stories with Data</title>
  <meta name="description" content="Chapter 17 Case study - Rohan’s books | Telling Stories with Data" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 17 Case study - Rohan’s books | Telling Stories with Data" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 17 Case study - Rohan’s books | Telling Stories with Data" />
  
  
  

<meta name="author" content="Rohan Alexander" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="case-study-gathering-and-tidying-data-from-paspaley.html"/>
<link rel="next" href="lab-ggplot2.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Telling Stories With Data</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#on-telling-stories"><i class="fa fa-check"></i><b>1.1</b> On telling stories</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#telling-stories-with-data"><i class="fa fa-check"></i><b>1.2</b> Telling stories with data</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#these-notes"><i class="fa fa-check"></i><b>1.3</b> These notes</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#software"><i class="fa fa-check"></i><b>1.3.1</b> Software</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#assumed-background"><i class="fa fa-check"></i><b>1.3.2</b> Assumed background</a></li>
<li class="chapter" data-level="1.3.3" data-path="index.html"><a href="index.html#structure"><i class="fa fa-check"></i><b>1.3.3</b> Structure</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.4</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#contact"><i class="fa fa-check"></i><b>1.5</b> Contact</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="lab-getting-started.html"><a href="lab-getting-started.html"><i class="fa fa-check"></i><b>2</b> Lab - Getting started</a><ul>
<li class="chapter" data-level="2.1" data-path="lab-getting-started.html"><a href="lab-getting-started.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="lab-getting-started.html"><a href="lab-getting-started.html#tidyverse"><i class="fa fa-check"></i><b>2.2</b> Tidyverse</a><ul>
<li class="chapter" data-level="2.2.1" data-path="lab-getting-started.html"><a href="lab-getting-started.html#the-pipe"><i class="fa fa-check"></i><b>2.2.1</b> The pipe</a></li>
<li class="chapter" data-level="2.2.2" data-path="lab-getting-started.html"><a href="lab-getting-started.html#select"><i class="fa fa-check"></i><b>2.2.2</b> Select</a></li>
<li class="chapter" data-level="2.2.3" data-path="lab-getting-started.html"><a href="lab-getting-started.html#filter"><i class="fa fa-check"></i><b>2.2.3</b> Filter</a></li>
<li class="chapter" data-level="2.2.4" data-path="lab-getting-started.html"><a href="lab-getting-started.html#arrange"><i class="fa fa-check"></i><b>2.2.4</b> Arrange</a></li>
<li class="chapter" data-level="2.2.5" data-path="lab-getting-started.html"><a href="lab-getting-started.html#group_by"><i class="fa fa-check"></i><b>2.2.5</b> group_by</a></li>
<li class="chapter" data-level="2.2.6" data-path="lab-getting-started.html"><a href="lab-getting-started.html#mutate"><i class="fa fa-check"></i><b>2.2.6</b> Mutate</a></li>
<li class="chapter" data-level="2.2.7" data-path="lab-getting-started.html"><a href="lab-getting-started.html#summarise"><i class="fa fa-check"></i><b>2.2.7</b> Summarise</a></li>
<li class="chapter" data-level="2.2.8" data-path="lab-getting-started.html"><a href="lab-getting-started.html#counting-by-group"><i class="fa fa-check"></i><b>2.2.8</b> Counting by group</a></li>
<li class="chapter" data-level="2.2.9" data-path="lab-getting-started.html"><a href="lab-getting-started.html#calculate-proportions"><i class="fa fa-check"></i><b>2.2.9</b> Calculate proportions</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="lab-getting-started.html"><a href="lab-getting-started.html#ggplot"><i class="fa fa-check"></i><b>2.3</b> ggplot</a><ul>
<li class="chapter" data-level="2.3.1" data-path="lab-getting-started.html"><a href="lab-getting-started.html#main-features"><i class="fa fa-check"></i><b>2.3.1</b> Main features</a></li>
<li class="chapter" data-level="2.3.2" data-path="lab-getting-started.html"><a href="lab-getting-started.html#facets"><i class="fa fa-check"></i><b>2.3.2</b> Facets</a></li>
<li class="chapter" data-level="2.3.3" data-path="lab-getting-started.html"><a href="lab-getting-started.html#small-things"><i class="fa fa-check"></i><b>2.3.3</b> Small things</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="lab-getting-started.html"><a href="lab-getting-started.html#other"><i class="fa fa-check"></i><b>2.4</b> Other</a><ul>
<li class="chapter" data-level="2.4.1" data-path="lab-getting-started.html"><a href="lab-getting-started.html#case_when"><i class="fa fa-check"></i><b>2.4.1</b> case_when</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html"><i class="fa fa-check"></i><b>3</b> Case study - The 2019 Canadian Federal Election</a><ul>
<li class="chapter" data-level="3.1" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html#create-a-graph-based-on-the-2019-canadian-federal-election"><i class="fa fa-check"></i><b>3.2</b> Create a graph based on the 2019 Canadian Federal election</a><ul>
<li class="chapter" data-level="3.2.1" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html#getting-started"><i class="fa fa-check"></i><b>3.2.1</b> Getting started</a></li>
<li class="chapter" data-level="3.2.2" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html#reading-in-the-data"><i class="fa fa-check"></i><b>3.2.2</b> Reading in the data</a></li>
<li class="chapter" data-level="3.2.3" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html#clean-the-data"><i class="fa fa-check"></i><b>3.2.3</b> Clean the data</a></li>
<li class="chapter" data-level="3.2.4" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html#make-a-graph"><i class="fa fa-check"></i><b>3.2.4</b> Make a graph</a></li>
<li class="chapter" data-level="3.2.5" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html#make-a-table"><i class="fa fa-check"></i><b>3.2.5</b> Make a table</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="communication.html"><a href="communication.html"><i class="fa fa-check"></i><b>4</b> Communication</a><ul>
<li class="chapter" data-level="4.1" data-path="communication.html"><a href="communication.html#introduction-2"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="communication.html"><a href="communication.html#title-abstract-and-introduction"><i class="fa fa-check"></i><b>4.2</b> Title, abstract, and introduction</a></li>
<li class="chapter" data-level="4.3" data-path="communication.html"><a href="communication.html#figures-tables-equations-and-technical-terms"><i class="fa fa-check"></i><b>4.3</b> Figures, tables, equations, and technical terms</a></li>
<li class="chapter" data-level="4.4" data-path="communication.html"><a href="communication.html#on-brevity"><i class="fa fa-check"></i><b>4.4</b> On brevity</a></li>
<li class="chapter" data-level="4.5" data-path="communication.html"><a href="communication.html#other-1"><i class="fa fa-check"></i><b>4.5</b> Other</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lab-using-r-in-practice.html"><a href="lab-using-r-in-practice.html"><i class="fa fa-check"></i><b>5</b> Lab - Using R in practice</a><ul>
<li class="chapter" data-level="5.1" data-path="lab-using-r-in-practice.html"><a href="lab-using-r-in-practice.html#introduction-3"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="lab-using-r-in-practice.html"><a href="lab-using-r-in-practice.html#getting-help"><i class="fa fa-check"></i><b>5.2</b> Getting help</a></li>
<li class="chapter" data-level="5.3" data-path="lab-using-r-in-practice.html"><a href="lab-using-r-in-practice.html#mentality"><i class="fa fa-check"></i><b>5.3</b> Mentality</a></li>
<li class="chapter" data-level="5.4" data-path="lab-using-r-in-practice.html"><a href="lab-using-r-in-practice.html#style"><i class="fa fa-check"></i><b>5.4</b> Style</a></li>
<li class="chapter" data-level="5.5" data-path="lab-using-r-in-practice.html"><a href="lab-using-r-in-practice.html#learning-more"><i class="fa fa-check"></i><b>5.5</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ethics.html"><a href="ethics.html"><i class="fa fa-check"></i><b>6</b> Ethics</a><ul>
<li class="chapter" data-level="6.1" data-path="ethics.html"><a href="ethics.html#introduction-4"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="ethics.html"><a href="ethics.html#questiontask"><i class="fa fa-check"></i><b>6.2</b> Question/task</a></li>
<li class="chapter" data-level="6.3" data-path="ethics.html"><a href="ethics.html#data"><i class="fa fa-check"></i><b>6.3</b> Data</a></li>
<li class="chapter" data-level="6.4" data-path="ethics.html"><a href="ethics.html#model"><i class="fa fa-check"></i><b>6.4</b> Model</a></li>
<li class="chapter" data-level="6.5" data-path="ethics.html"><a href="ethics.html#team"><i class="fa fa-check"></i><b>6.5</b> Team</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="case-study-all-state.html"><a href="case-study-all-state.html"><i class="fa fa-check"></i><b>7</b> Case-study: All state</a></li>
<li class="chapter" data-level="8" data-path="case-study-gay-face.html"><a href="case-study-gay-face.html"><i class="fa fa-check"></i><b>8</b> Case-study: Gay face</a></li>
<li class="chapter" data-level="9" data-path="reproducibility.html"><a href="reproducibility.html"><i class="fa fa-check"></i><b>9</b> Reproducibility</a><ul>
<li class="chapter" data-level="9.1" data-path="reproducibility.html"><a href="reproducibility.html#introduction-5"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="reproducibility.html"><a href="reproducibility.html#data-access"><i class="fa fa-check"></i><b>9.2</b> Data access</a></li>
<li class="chapter" data-level="9.3" data-path="reproducibility.html"><a href="reproducibility.html#on-mistakes"><i class="fa fa-check"></i><b>9.3</b> On mistakes</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="lab-r-markdown-and-r-projects.html"><a href="lab-r-markdown-and-r-projects.html"><i class="fa fa-check"></i><b>10</b> Lab - R Markdown and R Projects</a><ul>
<li class="chapter" data-level="10.1" data-path="lab-r-markdown-and-r-projects.html"><a href="lab-r-markdown-and-r-projects.html#r-markdown"><i class="fa fa-check"></i><b>10.1</b> R Markdown</a><ul>
<li class="chapter" data-level="10.1.1" data-path="lab-r-markdown-and-r-projects.html"><a href="lab-r-markdown-and-r-projects.html#getting-started-1"><i class="fa fa-check"></i><b>10.1.1</b> Getting started</a></li>
<li class="chapter" data-level="10.1.2" data-path="lab-r-markdown-and-r-projects.html"><a href="lab-r-markdown-and-r-projects.html#basic-commands"><i class="fa fa-check"></i><b>10.1.2</b> Basic commands</a></li>
<li class="chapter" data-level="10.1.3" data-path="lab-r-markdown-and-r-projects.html"><a href="lab-r-markdown-and-r-projects.html#r-chunks"><i class="fa fa-check"></i><b>10.1.3</b> R chunks</a></li>
<li class="chapter" data-level="10.1.4" data-path="lab-r-markdown-and-r-projects.html"><a href="lab-r-markdown-and-r-projects.html#abstracts-and-pdf-outputs"><i class="fa fa-check"></i><b>10.1.4</b> Abstracts and PDF outputs</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="lab-r-markdown-and-r-projects.html"><a href="lab-r-markdown-and-r-projects.html#r-projects"><i class="fa fa-check"></i><b>10.2</b> R projects</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="lab-git-and-github.html"><a href="lab-git-and-github.html"><i class="fa fa-check"></i><b>11</b> Lab - Git and GitHub</a><ul>
<li class="chapter" data-level="11.1" data-path="lab-git-and-github.html"><a href="lab-git-and-github.html#introduction-6"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="lab-git-and-github.html"><a href="lab-git-and-github.html#git"><i class="fa fa-check"></i><b>11.2</b> Git</a></li>
<li class="chapter" data-level="11.3" data-path="lab-git-and-github.html"><a href="lab-git-and-github.html#github"><i class="fa fa-check"></i><b>11.3</b> GitHub</a></li>
<li class="chapter" data-level="11.4" data-path="lab-git-and-github.html"><a href="lab-git-and-github.html#using-git-within-rstudio"><i class="fa fa-check"></i><b>11.4</b> Using Git within RStudio</a></li>
<li class="chapter" data-level="11.5" data-path="lab-git-and-github.html"><a href="lab-git-and-github.html#next-steps"><i class="fa fa-check"></i><b>11.5</b> Next steps</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html"><i class="fa fa-check"></i><b>12</b> Case study - TTC Subway Delays</a><ul>
<li class="chapter" data-level="12.1" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#introduction-7"><i class="fa fa-check"></i><b>12.1</b> Introduction</a><ul>
<li class="chapter" data-level="12.1.1" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#prerequesites"><i class="fa fa-check"></i><b>12.1.1</b> Prerequesites</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#finding-and-downloading-data-using-opendatatoronto"><i class="fa fa-check"></i><b>12.2</b> Finding and downloading data using <code>opendatatoronto</code></a><ul>
<li class="chapter" data-level="12.2.1" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#finding-the-data"><i class="fa fa-check"></i><b>12.2.1</b> Finding the data</a></li>
<li class="chapter" data-level="12.2.2" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#retrieving-the-data"><i class="fa fa-check"></i><b>12.2.2</b> Retrieving the data</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#plotting"><i class="fa fa-check"></i><b>12.3</b> Plotting</a><ul>
<li class="chapter" data-level="12.3.1" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#example-1-delays-by-line"><i class="fa fa-check"></i><b>12.3.1</b> Example 1: Delays by line</a></li>
<li class="chapter" data-level="12.3.2" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#example-2-delays-by-time-of-day"><i class="fa fa-check"></i><b>12.3.2</b> Example 2: Delays by time of day</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="developing-research-questions.html"><a href="developing-research-questions.html"><i class="fa fa-check"></i><b>13</b> Developing research questions</a><ul>
<li class="chapter" data-level="13.1" data-path="developing-research-questions.html"><a href="developing-research-questions.html#developing-research-questions-1"><i class="fa fa-check"></i><b>13.1</b> Developing research questions</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="gathering-data.html"><a href="gathering-data.html"><i class="fa fa-check"></i><b>14</b> Gathering data</a><ul>
<li class="chapter" data-level="14.1" data-path="gathering-data.html"><a href="gathering-data.html#gathering-data-1"><i class="fa fa-check"></i><b>14.1</b> Gathering data</a><ul>
<li class="chapter" data-level="14.1.1" data-path="gathering-data.html"><a href="gathering-data.html#deliberately-available"><i class="fa fa-check"></i><b>14.1.1</b> Deliberately available</a></li>
<li class="chapter" data-level="14.1.2" data-path="gathering-data.html"><a href="gathering-data.html#by-product"><i class="fa fa-check"></i><b>14.1.2</b> By product</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="lab-the-tidyverse.html"><a href="lab-the-tidyverse.html"><i class="fa fa-check"></i><b>15</b> Lab - The Tidyverse</a></li>
<li class="chapter" data-level="16" data-path="case-study-gathering-and-tidying-data-from-paspaley.html"><a href="case-study-gathering-and-tidying-data-from-paspaley.html"><i class="fa fa-check"></i><b>16</b> Case study - Gathering and tidying data from Paspaley</a><ul>
<li class="chapter" data-level="16.1" data-path="case-study-gathering-and-tidying-data-from-paspaley.html"><a href="case-study-gathering-and-tidying-data-from-paspaley.html#introduction-8"><i class="fa fa-check"></i><b>16.1</b> Introduction</a></li>
<li class="chapter" data-level="16.2" data-path="case-study-gathering-and-tidying-data-from-paspaley.html"><a href="case-study-gathering-and-tidying-data-from-paspaley.html#data-acquisition"><i class="fa fa-check"></i><b>16.2</b> Data acquisition</a></li>
<li class="chapter" data-level="16.3" data-path="case-study-gathering-and-tidying-data-from-paspaley.html"><a href="case-study-gathering-and-tidying-data-from-paspaley.html#data-cleaning"><i class="fa fa-check"></i><b>16.3</b> Data cleaning</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="case-study-rohans-books.html"><a href="case-study-rohans-books.html"><i class="fa fa-check"></i><b>17</b> Case study - Rohan’s books</a><ul>
<li class="chapter" data-level="17.1" data-path="case-study-rohans-books.html"><a href="case-study-rohans-books.html#introduction-9"><i class="fa fa-check"></i><b>17.1</b> Introduction</a></li>
<li class="chapter" data-level="17.2" data-path="case-study-rohans-books.html"><a href="case-study-rohans-books.html#gather-data"><i class="fa fa-check"></i><b>17.2</b> Gather data</a></li>
<li class="chapter" data-level="17.3" data-path="case-study-rohans-books.html"><a href="case-study-rohans-books.html#data-parsing-and-cleaning"><i class="fa fa-check"></i><b>17.3</b> Data parsing and cleaning</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="lab-ggplot2.html"><a href="lab-ggplot2.html"><i class="fa fa-check"></i><b>18</b> Lab - ggplot2</a></li>
<li class="chapter" data-level="19" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>19</b> Exploratory data analysis</a><ul>
<li class="chapter" data-level="19.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#introduction-10"><i class="fa fa-check"></i><b>19.1</b> Introduction</a></li>
<li class="chapter" data-level="19.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#a-note-on-packages"><i class="fa fa-check"></i><b>19.2</b> A note on packages</a></li>
<li class="chapter" data-level="19.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#ttc-subway-delays"><i class="fa fa-check"></i><b>19.3</b> TTC subway delays</a></li>
<li class="chapter" data-level="19.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#eda-and-data-viz"><i class="fa fa-check"></i><b>19.4</b> EDA and data viz</a></li>
<li class="chapter" data-level="19.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#data-checks"><i class="fa fa-check"></i><b>19.5</b> Data checks</a><ul>
<li class="chapter" data-level="19.5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#sanity-checks"><i class="fa fa-check"></i><b>19.5.1</b> Sanity Checks</a></li>
<li class="chapter" data-level="19.5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#missing-values"><i class="fa fa-check"></i><b>19.5.2</b> Missing values</a></li>
<li class="chapter" data-level="19.5.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#duplicates"><i class="fa fa-check"></i><b>19.5.3</b> Duplicates?</a></li>
<li class="chapter" data-level="19.5.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#visualizing-distributions"><i class="fa fa-check"></i><b>19.5.4</b> Visualizing distributions</a></li>
<li class="chapter" data-level="19.5.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#visualizing-time-series"><i class="fa fa-check"></i><b>19.5.5</b> Visualizing time series</a></li>
<li class="chapter" data-level="19.5.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#visualizing-relationships"><i class="fa fa-check"></i><b>19.5.6</b> Visualizing relationships</a></li>
<li class="chapter" data-level="19.5.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#pca"><i class="fa fa-check"></i><b>19.5.7</b> PCA</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercises"><i class="fa fa-check"></i><b>19.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="case-study-historical-canadian-elections.html"><a href="case-study-historical-canadian-elections.html"><i class="fa fa-check"></i><b>20</b> Case study - Historical Canadian elections</a></li>
<li class="chapter" data-level="21" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>21</b> Linear regression</a><ul>
<li class="chapter" data-level="21.1" data-path="linear-regression.html"><a href="linear-regression.html#introduction-11"><i class="fa fa-check"></i><b>21.1</b> Introduction</a></li>
<li class="chapter" data-level="21.2" data-path="linear-regression.html"><a href="linear-regression.html#competing-relationships"><i class="fa fa-check"></i><b>21.2</b> Competing relationships</a></li>
<li class="chapter" data-level="21.3" data-path="linear-regression.html"><a href="linear-regression.html#implementing-this-in-r"><i class="fa fa-check"></i><b>21.3</b> Implementing this in R</a></li>
<li class="chapter" data-level="21.4" data-path="linear-regression.html"><a href="linear-regression.html#tidy-up-with-broom"><i class="fa fa-check"></i><b>21.4</b> Tidy up with broom</a></li>
<li class="chapter" data-level="21.5" data-path="linear-regression.html"><a href="linear-regression.html#testing-hypothesis"><i class="fa fa-check"></i><b>21.5</b> Testing hypothesis</a></li>
<li class="chapter" data-level="21.6" data-path="linear-regression.html"><a href="linear-regression.html#adding-more-and-varied-explanatory-variables"><i class="fa fa-check"></i><b>21.6</b> Adding more and varied explanatory variables</a></li>
<li class="chapter" data-level="21.7" data-path="linear-regression.html"><a href="linear-regression.html#threats-to-validity-and-aspects-to-think-about"><i class="fa fa-check"></i><b>21.7</b> Threats to validity and aspects to think about</a></li>
<li class="chapter" data-level="21.8" data-path="linear-regression.html"><a href="linear-regression.html#more-credible-outputs"><i class="fa fa-check"></i><b>21.8</b> More credible outputs</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="lab-reporting-regression-results.html"><a href="lab-reporting-regression-results.html"><i class="fa fa-check"></i><b>22</b> Lab - Reporting regression results</a></li>
<li class="chapter" data-level="23" data-path="count-data.html"><a href="count-data.html"><i class="fa fa-check"></i><b>23</b> Count data</a><ul>
<li class="chapter" data-level="23.1" data-path="count-data.html"><a href="count-data.html#logistic-regression"><i class="fa fa-check"></i><b>23.1</b> Logistic regression</a></li>
<li class="chapter" data-level="23.2" data-path="count-data.html"><a href="count-data.html#poisson-regression"><i class="fa fa-check"></i><b>23.2</b> Poisson regression</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="classification.html"><a href="classification.html"><i class="fa fa-check"></i><b>24</b> Classification</a></li>
<li class="chapter" data-level="25" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html"><i class="fa fa-check"></i><b>25</b> Case study - Opinions about a casino in Toronto</a><ul>
<li class="chapter" data-level="25.1" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#data-preparation"><i class="fa fa-check"></i><b>25.1</b> Data preparation</a><ul>
<li class="chapter" data-level="25.1.1" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#getting-data-from-opendatatoronto"><i class="fa fa-check"></i><b>25.1.1</b> Getting data from <code>opendatatoronto</code></a></li>
<li class="chapter" data-level="25.1.2" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#getting-the-right-kind-of-object"><i class="fa fa-check"></i><b>25.1.2</b> Getting the right kind of object</a></li>
<li class="chapter" data-level="25.1.3" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#cleaning-up-the-dataframe"><i class="fa fa-check"></i><b>25.1.3</b> Cleaning up the dataframe</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#some-visual-exploration-and-more-cleanup-of-course"><i class="fa fa-check"></i><b>25.2</b> Some visual exploration (and more cleanup, of course)</a><ul>
<li class="chapter" data-level="25.2.1" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#getting-the-data-into-a-more-model-suitable-format"><i class="fa fa-check"></i><b>25.2.1</b> Getting the data into a more model-suitable format</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#logistic-regression-1"><i class="fa fa-check"></i><b>25.3</b> Logistic Regression</a><ul>
<li class="chapter" data-level="25.3.1" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#interpretation"><i class="fa fa-check"></i><b>25.3.1</b> Interpretation</a></li>
<li class="chapter" data-level="25.3.2" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#baseline-category"><i class="fa fa-check"></i><b>25.3.2</b> Baseline category</a></li>
<li class="chapter" data-level="25.3.3" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#making-estimates"><i class="fa fa-check"></i><b>25.3.3</b> Making estimates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html"><i class="fa fa-check"></i><b>26</b> Case study - Airbnb listing in Toronto</a><ul>
<li class="chapter" data-level="26.1" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#essentials"><i class="fa fa-check"></i><b>26.1</b> Essentials</a></li>
<li class="chapter" data-level="26.2" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#set-up"><i class="fa fa-check"></i><b>26.2</b> Set up</a></li>
<li class="chapter" data-level="26.3" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#get-data"><i class="fa fa-check"></i><b>26.3</b> Get data</a></li>
<li class="chapter" data-level="26.4" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#clean-data"><i class="fa fa-check"></i><b>26.4</b> Clean data</a><ul>
<li class="chapter" data-level="26.4.1" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#price"><i class="fa fa-check"></i><b>26.4.1</b> Price</a></li>
<li class="chapter" data-level="26.4.2" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#superhosts"><i class="fa fa-check"></i><b>26.4.2</b> Superhosts</a></li>
<li class="chapter" data-level="26.4.3" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#reviews"><i class="fa fa-check"></i><b>26.4.3</b> Reviews</a></li>
<li class="chapter" data-level="26.4.4" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#response-time"><i class="fa fa-check"></i><b>26.4.4</b> Response time</a></li>
<li class="chapter" data-level="26.4.5" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#host-number-of-listings"><i class="fa fa-check"></i><b>26.4.5</b> Host number of listings</a></li>
<li class="chapter" data-level="26.4.6" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#decisions"><i class="fa fa-check"></i><b>26.4.6</b> Decisions</a></li>
</ul></li>
<li class="chapter" data-level="26.5" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#explore-data"><i class="fa fa-check"></i><b>26.5</b> Explore data</a><ul>
<li class="chapter" data-level="26.5.1" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#price-and-reviews"><i class="fa fa-check"></i><b>26.5.1</b> Price and reviews</a></li>
<li class="chapter" data-level="26.5.2" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#superhost-and-response-time"><i class="fa fa-check"></i><b>26.5.2</b> Superhost and response-time</a></li>
<li class="chapter" data-level="26.5.3" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#neighbourhood"><i class="fa fa-check"></i><b>26.5.3</b> Neighbourhood</a></li>
</ul></li>
<li class="chapter" data-level="26.6" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#model-data"><i class="fa fa-check"></i><b>26.6</b> Model data</a><ul>
<li class="chapter" data-level="26.6.1" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#logistic-regression-2"><i class="fa fa-check"></i><b>26.6.1</b> Logistic regression</a></li>
</ul></li>
<li class="chapter" data-level="26.7" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#next-steps-1"><i class="fa fa-check"></i><b>26.7</b> Next steps</a></li>
<li class="chapter" data-level="26.8" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#references"><i class="fa fa-check"></i><b>26.8</b> References</a></li>
</ul></li>
<li class="chapter" data-level="27" data-path="ab-testing-and-rcts.html"><a href="ab-testing-and-rcts.html"><i class="fa fa-check"></i><b>27</b> A/B testing and RCTs</a><ul>
<li class="chapter" data-level="27.1" data-path="ab-testing-and-rcts.html"><a href="ab-testing-and-rcts.html#introduction-12"><i class="fa fa-check"></i><b>27.1</b> Introduction</a></li>
<li class="chapter" data-level="27.2" data-path="ab-testing-and-rcts.html"><a href="ab-testing-and-rcts.html#motivation"><i class="fa fa-check"></i><b>27.2</b> Motivation</a></li>
<li class="chapter" data-level="27.3" data-path="ab-testing-and-rcts.html"><a href="ab-testing-and-rcts.html#tea-party"><i class="fa fa-check"></i><b>27.3</b> Tea party</a></li>
<li class="chapter" data-level="27.4" data-path="ab-testing-and-rcts.html"><a href="ab-testing-and-rcts.html#some-unexpected-properties-from-randomised-sampling"><i class="fa fa-check"></i><b>27.4</b> Some unexpected properties from randomised sampling</a></li>
<li class="chapter" data-level="27.5" data-path="ab-testing-and-rcts.html"><a href="ab-testing-and-rcts.html#anova"><i class="fa fa-check"></i><b>27.5</b> ANOVA</a></li>
<li class="chapter" data-level="27.6" data-path="ab-testing-and-rcts.html"><a href="ab-testing-and-rcts.html#treatment-and-control"><i class="fa fa-check"></i><b>27.6</b> Treatment and control</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="matching-difference-in-differences.html"><a href="matching-difference-in-differences.html"><i class="fa fa-check"></i><b>28</b> Matching &amp; difference-in-differences</a><ul>
<li class="chapter" data-level="28.1" data-path="matching-difference-in-differences.html"><a href="matching-difference-in-differences.html#introduction-13"><i class="fa fa-check"></i><b>28.1</b> Introduction</a></li>
<li class="chapter" data-level="28.2" data-path="matching-difference-in-differences.html"><a href="matching-difference-in-differences.html#motivation-1"><i class="fa fa-check"></i><b>28.2</b> Motivation</a></li>
<li class="chapter" data-level="28.3" data-path="matching-difference-in-differences.html"><a href="matching-difference-in-differences.html#simulated-example"><i class="fa fa-check"></i><b>28.3</b> Simulated example</a></li>
<li class="chapter" data-level="28.4" data-path="matching-difference-in-differences.html"><a href="matching-difference-in-differences.html#assumptions"><i class="fa fa-check"></i><b>28.4</b> Assumptions</a></li>
<li class="chapter" data-level="28.5" data-path="matching-difference-in-differences.html"><a href="matching-difference-in-differences.html#matching"><i class="fa fa-check"></i><b>28.5</b> Matching</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><a href="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><i class="fa fa-check"></i><b>29</b> Case study - Lower advertising revenue reduced French newspaper prices between 1960 and 1974</a><ul>
<li class="chapter" data-level="29.1" data-path="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><a href="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html#introduction-14"><i class="fa fa-check"></i><b>29.1</b> Introduction</a></li>
<li class="chapter" data-level="29.2" data-path="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><a href="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html#background"><i class="fa fa-check"></i><b>29.2</b> Background</a></li>
<li class="chapter" data-level="29.3" data-path="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><a href="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html#data-1"><i class="fa fa-check"></i><b>29.3</b> Data</a></li>
<li class="chapter" data-level="29.4" data-path="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><a href="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html#model-1"><i class="fa fa-check"></i><b>29.4</b> Model</a></li>
<li class="chapter" data-level="29.5" data-path="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><a href="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html#results"><i class="fa fa-check"></i><b>29.5</b> Results</a></li>
<li class="chapter" data-level="29.6" data-path="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><a href="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html#other-points"><i class="fa fa-check"></i><b>29.6</b> Other points</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="shiny-applications.html"><a href="shiny-applications.html"><i class="fa fa-check"></i><b>30</b> Shiny applications</a></li>
<li class="chapter" data-level="31" data-path="regression-discontinuity-design.html"><a href="regression-discontinuity-design.html"><i class="fa fa-check"></i><b>31</b> Regression discontinuity design</a><ul>
<li class="chapter" data-level="31.1" data-path="regression-discontinuity-design.html"><a href="regression-discontinuity-design.html#introduction-15"><i class="fa fa-check"></i><b>31.1</b> Introduction</a></li>
<li class="chapter" data-level="31.2" data-path="regression-discontinuity-design.html"><a href="regression-discontinuity-design.html#simulated-example-1"><i class="fa fa-check"></i><b>31.2</b> Simulated example</a><ul>
<li class="chapter" data-level="31.2.1" data-path="regression-discontinuity-design.html"><a href="regression-discontinuity-design.html#different-slopes"><i class="fa fa-check"></i><b>31.2.1</b> Different slopes</a></li>
</ul></li>
<li class="chapter" data-level="31.3" data-path="regression-discontinuity-design.html"><a href="regression-discontinuity-design.html#overlap"><i class="fa fa-check"></i><b>31.3</b> Overlap</a></li>
<li class="chapter" data-level="31.4" data-path="regression-discontinuity-design.html"><a href="regression-discontinuity-design.html#examples"><i class="fa fa-check"></i><b>31.4</b> Examples</a><ul>
<li class="chapter" data-level="31.4.1" data-path="regression-discontinuity-design.html"><a href="regression-discontinuity-design.html#elections"><i class="fa fa-check"></i><b>31.4.1</b> Elections</a></li>
<li class="chapter" data-level="31.4.2" data-path="regression-discontinuity-design.html"><a href="regression-discontinuity-design.html#economic-development"><i class="fa fa-check"></i><b>31.4.2</b> Economic development</a></li>
</ul></li>
<li class="chapter" data-level="31.5" data-path="regression-discontinuity-design.html"><a href="regression-discontinuity-design.html#implementation"><i class="fa fa-check"></i><b>31.5</b> Implementation</a></li>
<li class="chapter" data-level="31.6" data-path="regression-discontinuity-design.html"><a href="regression-discontinuity-design.html#fuzzy-rdd"><i class="fa fa-check"></i><b>31.6</b> Fuzzy RDD</a></li>
<li class="chapter" data-level="31.7" data-path="regression-discontinuity-design.html"><a href="regression-discontinuity-design.html#threats-to-validity"><i class="fa fa-check"></i><b>31.7</b> Threats to validity</a></li>
<li class="chapter" data-level="31.8" data-path="regression-discontinuity-design.html"><a href="regression-discontinuity-design.html#weaknesses"><i class="fa fa-check"></i><b>31.8</b> Weaknesses</a></li>
</ul></li>
<li class="chapter" data-level="32" data-path="instrumental-variables.html"><a href="instrumental-variables.html"><i class="fa fa-check"></i><b>32</b> Instrumental variables</a></li>
<li class="chapter" data-level="33" data-path="assessment.html"><a href="assessment.html"><i class="fa fa-check"></i><b>33</b> Assessment</a><ul>
<li class="chapter" data-level="33.1" data-path="assessment.html"><a href="assessment.html#problem-set-1"><i class="fa fa-check"></i><b>33.1</b> Problem Set 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Telling Stories with Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="case-study---rohans-books" class="section level1">
<h1><span class="header-section-number">Chapter 17</span> Case study - Rohan’s books</h1>
<p><strong>Required reading</strong></p>
<ul>
<li></li>
</ul>
<p><strong>Recommended reading</strong></p>
<ul>
<li></li>
</ul>
<p><strong>Key concepts/skills/etc</strong></p>
<ul>
<li>Scraping data responsibly.</li>
<li>Cleaning that data.</li>
</ul>
<p><strong>Key libraries</strong></p>
<ul>
<li><code>rvest</code></li>
<li><code>tidyverse</code></li>
</ul>
<p><strong>Key functions</strong></p>
<ul>
<li><code>augment()</code></li>
<li><code>glance()</code></li>
<li><code>lm()</code></li>
<li><code>tidy()</code></li>
</ul>
<div id="introduction-9" class="section level2">
<h2><span class="header-section-number">17.1</span> Introduction</h2>
<p>In this case study we are going to scrape a list of books that I own, then clean it, and look at the distribution of the first letters of author surnames.</p>
</div>
<div id="gather-data" class="section level2">
<h2><span class="header-section-number">17.2</span> Gather data</h2>
<p>The key library that we will use is the <code>rvest</code> library. This makes it easier to download a website, and to then navigate the html to find the aspects that we are interested in. You should create a new project in a new folder. Within that new folder you should make three new folders: inputs, outputs, and scripts.</p>
<p>In the scripts folder you should write and save a script along these lines.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" data-line-number="1"><span class="co">#### Contact details ####</span></a>
<a class="sourceLine" id="cb144-2" data-line-number="2"><span class="co"># Title: Get data from rohanalexander.com</span></a>
<a class="sourceLine" id="cb144-3" data-line-number="3"><span class="co"># Purpose: This script gets data from Rohan&#39;s website about the books that he owns. It calls his website and then saves the dataset to inputs.</span></a>
<a class="sourceLine" id="cb144-4" data-line-number="4"><span class="co"># Author: Rohan Alexander</span></a>
<a class="sourceLine" id="cb144-5" data-line-number="5"><span class="co"># Contact: rohan.alexander@utoronto.ca</span></a>
<a class="sourceLine" id="cb144-6" data-line-number="6"><span class="co"># Last updated: 30 January 2020</span></a>
<a class="sourceLine" id="cb144-7" data-line-number="7"><span class="co"># License: MIT License.</span></a>
<a class="sourceLine" id="cb144-8" data-line-number="8"></a>
<a class="sourceLine" id="cb144-9" data-line-number="9"></a>
<a class="sourceLine" id="cb144-10" data-line-number="10"><span class="co">#### Set up workspace ####</span></a>
<a class="sourceLine" id="cb144-11" data-line-number="11"><span class="kw">library</span>(rvest)</a>
<a class="sourceLine" id="cb144-12" data-line-number="12"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb144-13" data-line-number="13"></a>
<a class="sourceLine" id="cb144-14" data-line-number="14"></a>
<a class="sourceLine" id="cb144-15" data-line-number="15"><span class="co">#### Get html ####</span></a>
<a class="sourceLine" id="cb144-16" data-line-number="16">rohans_data &lt;-<span class="st"> </span><span class="kw">read_html</span>(<span class="st">&quot;https://rohanalexander.com/bookshelf.html&quot;</span>) <span class="co"># This takes a website as an input and will read it into R, in the save way that we can read a, say, CSV into R.</span></a>
<a class="sourceLine" id="cb144-17" data-line-number="17"></a>
<a class="sourceLine" id="cb144-18" data-line-number="18"><span class="kw">write_html</span>(rohans_data, <span class="st">&quot;inputs/raw_data.html&quot;</span>) <span class="co"># Always save your raw dataset as soon as you get it so that you have a record of it. This is the equivalent of, say, write_csv() that we have used earlier.</span></a></code></pre></div>
</div>
<div id="data-parsing-and-cleaning" class="section level2">
<h2><span class="header-section-number">17.3</span> Data parsing and cleaning</h2>
<p>Now we need to navigate the html to get the aspects that we want, and to then put them into some sensible structure. I always try to get the data into a tibble as early as possible. While it’s possible to work with the nested data, I recommend moving to a tibble so that the usual functions can be used.</p>
<p>In the scripts folder you should write and save a new R script along these lines.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" data-line-number="1"><span class="co">#### Contact details ####</span></a>
<a class="sourceLine" id="cb145-2" data-line-number="2"><span class="co"># Title: Clean data from rohanaledander.com</span></a>
<a class="sourceLine" id="cb145-3" data-line-number="3"><span class="co"># Purpose: This script cleans data that was downloaded in 01-get_data.R.</span></a>
<a class="sourceLine" id="cb145-4" data-line-number="4"><span class="co"># Author: Rohan Alexander</span></a>
<a class="sourceLine" id="cb145-5" data-line-number="5"><span class="co"># Contact: rohan.alexander@utoronto.ca</span></a>
<a class="sourceLine" id="cb145-6" data-line-number="6"><span class="co"># Pre-requisites: Need to have run 01_get_data.R and have saved the data.</span></a>
<a class="sourceLine" id="cb145-7" data-line-number="7"><span class="co"># Last updated: 2 February 2020</span></a>
<a class="sourceLine" id="cb145-8" data-line-number="8"><span class="co"># License: MIT License.</span></a>
<a class="sourceLine" id="cb145-9" data-line-number="9"></a>
<a class="sourceLine" id="cb145-10" data-line-number="10"></a>
<a class="sourceLine" id="cb145-11" data-line-number="11"><span class="co">#### Set up workspace ####</span></a>
<a class="sourceLine" id="cb145-12" data-line-number="12"><span class="co"># install.packages(c(&quot;gender&quot;, &quot;genderdata&quot;),</span></a>
<a class="sourceLine" id="cb145-13" data-line-number="13"><span class="co">#                  repos = &quot;http://packages.ropensci.org&quot;,</span></a>
<a class="sourceLine" id="cb145-14" data-line-number="14"><span class="co">#                  type = &quot;source&quot;)</span></a>
<a class="sourceLine" id="cb145-15" data-line-number="15"><span class="kw">library</span>(gender)</a>
<a class="sourceLine" id="cb145-16" data-line-number="16"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb145-17" data-line-number="17"><span class="kw">library</span>(rvest)</a>
<a class="sourceLine" id="cb145-18" data-line-number="18"></a>
<a class="sourceLine" id="cb145-19" data-line-number="19">rohans_data &lt;-<span class="st"> </span><span class="kw">read_html</span>(<span class="st">&quot;inputs/raw_data.html&quot;</span>)</a>
<a class="sourceLine" id="cb145-20" data-line-number="20"></a>
<a class="sourceLine" id="cb145-21" data-line-number="21"></a>
<a class="sourceLine" id="cb145-22" data-line-number="22"><span class="co">#### Clean data ####</span></a>
<a class="sourceLine" id="cb145-23" data-line-number="23"><span class="co"># Identify the lines that have books on them based on the list html tag</span></a>
<a class="sourceLine" id="cb145-24" data-line-number="24">text_data &lt;-<span class="st"> </span>rohans_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-25" data-line-number="25"><span class="st">  </span><span class="kw">html_nodes</span>(<span class="st">&quot;li&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-26" data-line-number="26"><span class="st">  </span><span class="kw">html_text</span>()</a>
<a class="sourceLine" id="cb145-27" data-line-number="27"></a>
<a class="sourceLine" id="cb145-28" data-line-number="28">all_books &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">books =</span> text_data)</a>
<a class="sourceLine" id="cb145-29" data-line-number="29"></a>
<a class="sourceLine" id="cb145-30" data-line-number="30"><span class="co"># All content is just one string, so need to separate title and author</span></a>
<a class="sourceLine" id="cb145-31" data-line-number="31">all_books &lt;-</a>
<a class="sourceLine" id="cb145-32" data-line-number="32"><span class="st">  </span>all_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-33" data-line-number="33"><span class="st">  </span><span class="kw">separate</span>(books, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;title&quot;</span>, <span class="st">&quot;author&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;”&quot;</span>)</a>
<a class="sourceLine" id="cb145-34" data-line-number="34"></a>
<a class="sourceLine" id="cb145-35" data-line-number="35"><span class="co"># Remove leading comma and clean up the titles a little</span></a>
<a class="sourceLine" id="cb145-36" data-line-number="36">all_books &lt;-</a>
<a class="sourceLine" id="cb145-37" data-line-number="37"><span class="st">  </span>all_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-38" data-line-number="38"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">author =</span> <span class="kw">str_remove_all</span>(author, <span class="st">&quot;^, &quot;</span>),</a>
<a class="sourceLine" id="cb145-39" data-line-number="39">         <span class="dt">author =</span> <span class="kw">str_squish</span>(author),</a>
<a class="sourceLine" id="cb145-40" data-line-number="40">         <span class="dt">title =</span> <span class="kw">str_remove</span>(title, <span class="st">&quot;“&quot;</span>),</a>
<a class="sourceLine" id="cb145-41" data-line-number="41">         <span class="dt">title =</span> <span class="kw">str_remove</span>(title, <span class="st">&quot;^-&quot;</span>)</a>
<a class="sourceLine" id="cb145-42" data-line-number="42">         )</a>
<a class="sourceLine" id="cb145-43" data-line-number="43"></a>
<a class="sourceLine" id="cb145-44" data-line-number="44"></a>
<a class="sourceLine" id="cb145-45" data-line-number="45"><span class="co"># Some authors have comments after their name, so need to get rid of them, although there are some exceptions that will not work</span></a>
<a class="sourceLine" id="cb145-46" data-line-number="46"><span class="co"># J. K. Rowling.</span></a>
<a class="sourceLine" id="cb145-47" data-line-number="47"><span class="co"># M. Mitchell Waldrop.</span></a>
<a class="sourceLine" id="cb145-48" data-line-number="48"><span class="co"># David A. Price</span></a>
<a class="sourceLine" id="cb145-49" data-line-number="49">all_books &lt;-</a>
<a class="sourceLine" id="cb145-50" data-line-number="50"><span class="st">  </span>all_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-51" data-line-number="51"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">author =</span> <span class="kw">str_replace_all</span>(author,</a>
<a class="sourceLine" id="cb145-52" data-line-number="52">                              <span class="kw">c</span>(<span class="st">&quot;J. K. Rowling.&quot;</span> =<span class="st"> &quot;J K Rowling.&quot;</span>,</a>
<a class="sourceLine" id="cb145-53" data-line-number="53">                                <span class="st">&quot;M. Mitchell Waldrop.&quot;</span> =<span class="st"> &quot;M Mitchell Waldrop.&quot;</span>,</a>
<a class="sourceLine" id="cb145-54" data-line-number="54">                                <span class="st">&quot;David A. Price&quot;</span> =<span class="st"> &quot;David A Price&quot;</span>)</a>
<a class="sourceLine" id="cb145-55" data-line-number="55">                              )</a>
<a class="sourceLine" id="cb145-56" data-line-number="56">         ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-57" data-line-number="57"><span class="st">  </span><span class="kw">separate</span>(author, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;author_correct&quot;</span>, <span class="st">&quot;throw_away&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.&quot;</span>, <span class="dt">extra =</span> <span class="st">&quot;drop&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-58" data-line-number="58"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>throw_away) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-59" data-line-number="59"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">author =</span> author_correct)</a>
<a class="sourceLine" id="cb145-60" data-line-number="60"></a>
<a class="sourceLine" id="cb145-61" data-line-number="61"><span class="co"># Some books have multiple authors, so need to seperate them</span></a>
<a class="sourceLine" id="cb145-62" data-line-number="62"><span class="co"># One has multiple authors:</span></a>
<a class="sourceLine" id="cb145-63" data-line-number="63"><span class="co"># &quot;Daniela Witten, Gareth James, Robert Tibshirani, and Trevor Hastie&quot;</span></a>
<a class="sourceLine" id="cb145-64" data-line-number="64">all_books &lt;-</a>
<a class="sourceLine" id="cb145-65" data-line-number="65"><span class="st">  </span>all_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-66" data-line-number="66"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">author =</span> <span class="kw">str_replace</span>(author,</a>
<a class="sourceLine" id="cb145-67" data-line-number="67">                              <span class="st">&quot;Daniela Witten, Gareth James, Robert Tibshirani, and Trevor Hastie&quot;</span>,</a>
<a class="sourceLine" id="cb145-68" data-line-number="68">                              <span class="st">&quot;Daniela Witten and Gareth James and Robert Tibshirani and Trevor Hastie&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-69" data-line-number="69"><span class="st">  </span><span class="kw">separate</span>(author, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;author_first&quot;</span>, <span class="st">&quot;author_second&quot;</span>, <span class="st">&quot;author_third&quot;</span>, <span class="st">&quot;author_fourth&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot; and &quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;right&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-70" data-line-number="70"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="kw">starts_with</span>(<span class="st">&quot;author_&quot;</span>),</a>
<a class="sourceLine" id="cb145-71" data-line-number="71">               <span class="dt">names_to =</span> <span class="st">&quot;author_position&quot;</span>,</a>
<a class="sourceLine" id="cb145-72" data-line-number="72">               <span class="dt">values_to =</span> <span class="st">&quot;author&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-73" data-line-number="73"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>author_position) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-74" data-line-number="74"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(author))</a>
<a class="sourceLine" id="cb145-75" data-line-number="75"></a>
<a class="sourceLine" id="cb145-76" data-line-number="76"><span class="co"># Need the first name for the gender package</span></a>
<a class="sourceLine" id="cb145-77" data-line-number="77">all_books &lt;-</a>
<a class="sourceLine" id="cb145-78" data-line-number="78"><span class="st">  </span>all_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-79" data-line-number="79"><span class="st">  </span><span class="kw">separate</span>(author, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;first_name&quot;</span>, <span class="st">&quot;rest&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>, <span class="dt">remove =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-80" data-line-number="80"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>rest)</a>
<a class="sourceLine" id="cb145-81" data-line-number="81"></a>
<a class="sourceLine" id="cb145-82" data-line-number="82"><span class="co"># Deal with edge cases:</span></a>
<a class="sourceLine" id="cb145-83" data-line-number="83"><span class="co"># &quot;J K Rowling&quot;</span></a>
<a class="sourceLine" id="cb145-84" data-line-number="84"><span class="co"># &quot;TE Lawrence&quot;</span></a>
<a class="sourceLine" id="cb145-85" data-line-number="85"><span class="co"># &quot;M Mitchell Waldrop&quot;</span></a>
<a class="sourceLine" id="cb145-86" data-line-number="86">all_books &lt;-</a>
<a class="sourceLine" id="cb145-87" data-line-number="87"><span class="st">  </span>all_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-88" data-line-number="88"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">first_name =</span></a>
<a class="sourceLine" id="cb145-89" data-line-number="89">           <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb145-90" data-line-number="90">             author <span class="op">==</span><span class="st"> &quot;J K Rowling&quot;</span> <span class="op">~</span><span class="st"> &quot;Joanne&quot;</span>,</a>
<a class="sourceLine" id="cb145-91" data-line-number="91">             author <span class="op">==</span><span class="st"> &quot;TE Lawrence&quot;</span> <span class="op">~</span><span class="st"> &quot;Thomas&quot;</span>,</a>
<a class="sourceLine" id="cb145-92" data-line-number="92">             author <span class="op">==</span><span class="st"> &quot;M Mitchell Waldrop&quot;</span> <span class="op">~</span><span class="st"> &quot;Mitchell&quot;</span>,</a>
<a class="sourceLine" id="cb145-93" data-line-number="93">             <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>first_name</a>
<a class="sourceLine" id="cb145-94" data-line-number="94">           )</a>
<a class="sourceLine" id="cb145-95" data-line-number="95">  )</a>
<a class="sourceLine" id="cb145-96" data-line-number="96"></a>
<a class="sourceLine" id="cb145-97" data-line-number="97"></a>
<a class="sourceLine" id="cb145-98" data-line-number="98"><span class="co">#### Add a guessed gender based on gender package ####</span></a>
<a class="sourceLine" id="cb145-99" data-line-number="99"><span class="co"># There needs to be some care when doing this. It&#39;s certainly something that should be discussed in the write-up</span></a>
<a class="sourceLine" id="cb145-100" data-line-number="100">gender_guess &lt;-<span class="st"> </span>gender<span class="op">::</span><span class="kw">gender</span>(all_books<span class="op">$</span>first_name) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-101" data-line-number="101"><span class="st">  </span><span class="kw">select</span>(name, gender) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-102" data-line-number="102"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">guessed_gender =</span> gender,</a>
<a class="sourceLine" id="cb145-103" data-line-number="103">         <span class="dt">first_name =</span> name) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-104" data-line-number="104"><span class="st">  </span><span class="kw">distinct</span>()</a>
<a class="sourceLine" id="cb145-105" data-line-number="105"></a>
<a class="sourceLine" id="cb145-106" data-line-number="106">all_books &lt;-</a>
<a class="sourceLine" id="cb145-107" data-line-number="107"><span class="st">  </span>all_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-108" data-line-number="108"><span class="st">  </span><span class="kw">left_join</span>(gender_guess)</a>
<a class="sourceLine" id="cb145-109" data-line-number="109"></a>
<a class="sourceLine" id="cb145-110" data-line-number="110">all_books &lt;-</a>
<a class="sourceLine" id="cb145-111" data-line-number="111"><span class="st">  </span>all_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-112" data-line-number="112"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">guessed_gender =</span> <span class="kw">replace_na</span>(guessed_gender, <span class="st">&quot;unsure&quot;</span>))</a>
<a class="sourceLine" id="cb145-113" data-line-number="113"></a>
<a class="sourceLine" id="cb145-114" data-line-number="114"></a>
<a class="sourceLine" id="cb145-115" data-line-number="115"><span class="co">#### Save the data ####</span></a>
<a class="sourceLine" id="cb145-116" data-line-number="116"><span class="kw">write_csv</span>(all_books, <span class="st">&quot;outputs/data/books_with_gender.csv&quot;</span>)</a>
<a class="sourceLine" id="cb145-117" data-line-number="117"><span class="kw">rm</span>(all_books, gender_guess, rohans_data, text_data)</a></code></pre></div>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" data-line-number="1"><span class="co">#### Contact details ####</span></a>
<a class="sourceLine" id="cb146-2" data-line-number="2"><span class="co"># Title: Exploratory data analysis of Rohan&#39;s books</span></a>
<a class="sourceLine" id="cb146-3" data-line-number="3"><span class="co"># Purpose: This script conducts exploratory data analysis of data that was</span></a>
<a class="sourceLine" id="cb146-4" data-line-number="4"><span class="co"># downloaded in 01-get_data.R and cleaned in 02_clean_data.R</span></a>
<a class="sourceLine" id="cb146-5" data-line-number="5"><span class="co"># Author: Rohan Alexander</span></a>
<a class="sourceLine" id="cb146-6" data-line-number="6"><span class="co"># Contact: rohan.alexander@utoronto.ca</span></a>
<a class="sourceLine" id="cb146-7" data-line-number="7"><span class="co"># Pre-requisites: Need to have run 01_get_data.R and have saved the cleaned data</span></a>
<a class="sourceLine" id="cb146-8" data-line-number="8"><span class="co"># from 02_clean_data.R.</span></a>
<a class="sourceLine" id="cb146-9" data-line-number="9"><span class="co"># Last updated: 2 February 2020</span></a>
<a class="sourceLine" id="cb146-10" data-line-number="10"><span class="co"># License: MIT License.</span></a>
<a class="sourceLine" id="cb146-11" data-line-number="11"></a>
<a class="sourceLine" id="cb146-12" data-line-number="12"></a>
<a class="sourceLine" id="cb146-13" data-line-number="13"><span class="co">#### Set up workspace ####</span></a>
<a class="sourceLine" id="cb146-14" data-line-number="14"><span class="kw">library</span>(janitor)</a>
<a class="sourceLine" id="cb146-15" data-line-number="15"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb146-16" data-line-number="16"></a>
<a class="sourceLine" id="cb146-17" data-line-number="17">books &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;outputs/data/books_with_gender.csv&quot;</span>)</a>
<a class="sourceLine" id="cb146-18" data-line-number="18"></a>
<a class="sourceLine" id="cb146-19" data-line-number="19"></a>
<a class="sourceLine" id="cb146-20" data-line-number="20"><span class="co">#### Summary stats ####</span></a>
<a class="sourceLine" id="cb146-21" data-line-number="21"><span class="co"># skimr::skim(books)</span></a>
<a class="sourceLine" id="cb146-22" data-line-number="22"></a>
<a class="sourceLine" id="cb146-23" data-line-number="23"><span class="kw">table</span>(books<span class="op">$</span>guessed_gender) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb146-24" data-line-number="24"><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>(<span class="dt">col.names =</span> <span class="kw">c</span>(<span class="st">&quot;Guessed gender&quot;</span>, <span class="st">&quot;Frequency&quot;</span>))</a>
<a class="sourceLine" id="cb146-25" data-line-number="25"></a>
<a class="sourceLine" id="cb146-26" data-line-number="26"><span class="kw">summary</span>(books)</a>
<a class="sourceLine" id="cb146-27" data-line-number="27"></a>
<a class="sourceLine" id="cb146-28" data-line-number="28"><span class="co"># Actually, there&#39;s not a lot going on here. I&#39;ll just move on. Should have picked a better dataset for the example. Sorry.</span></a></code></pre></div>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" data-line-number="1"><span class="co">#### Contact details ####</span></a>
<a class="sourceLine" id="cb147-2" data-line-number="2"><span class="co"># Title: Make a table of the guessed gender of the authors of Rohan&#39;s books</span></a>
<a class="sourceLine" id="cb147-3" data-line-number="3"><span class="co"># Purpose: This script conducts exploratory data analysis of data that was</span></a>
<a class="sourceLine" id="cb147-4" data-line-number="4"><span class="co"># downloaded in 01-get_data.R and cleaned in 02_clean_data.R.</span></a>
<a class="sourceLine" id="cb147-5" data-line-number="5"><span class="co"># Author: Rohan Alexander</span></a>
<a class="sourceLine" id="cb147-6" data-line-number="6"><span class="co"># Contact: rohan.alexander@utoronto.ca</span></a>
<a class="sourceLine" id="cb147-7" data-line-number="7"><span class="co"># Pre-requisites: Need to have run 01_get_data.R and have saved the cleaned data</span></a>
<a class="sourceLine" id="cb147-8" data-line-number="8"><span class="co"># from 02_clean_data.R.</span></a>
<a class="sourceLine" id="cb147-9" data-line-number="9"><span class="co"># Last updated: 2 February 2020</span></a>
<a class="sourceLine" id="cb147-10" data-line-number="10"><span class="co"># License: MIT License.</span></a>
<a class="sourceLine" id="cb147-11" data-line-number="11"></a>
<a class="sourceLine" id="cb147-12" data-line-number="12"></a>
<a class="sourceLine" id="cb147-13" data-line-number="13"><span class="co">#### Set up workspace ####</span></a>
<a class="sourceLine" id="cb147-14" data-line-number="14"><span class="kw">library</span>(janitor)</a>
<a class="sourceLine" id="cb147-15" data-line-number="15"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb147-16" data-line-number="16"></a>
<a class="sourceLine" id="cb147-17" data-line-number="17">books &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;outputs/data/books_with_gender.csv&quot;</span>)</a>
<a class="sourceLine" id="cb147-18" data-line-number="18"></a>
<a class="sourceLine" id="cb147-19" data-line-number="19"></a>
<a class="sourceLine" id="cb147-20" data-line-number="20"><span class="co">#### Make tables ####</span></a>
<a class="sourceLine" id="cb147-21" data-line-number="21"><span class="co"># Just a table of the counts, by guessed gender</span></a>
<a class="sourceLine" id="cb147-22" data-line-number="22">counts &lt;-<span class="st"> </span>books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb147-23" data-line-number="23"><span class="st">  </span><span class="kw">pull</span>(guessed_gender) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb147-24" data-line-number="24"><span class="st">  </span><span class="kw">tabyl</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb147-25" data-line-number="25"><span class="st">  </span><span class="kw">adorn_pct_formatting</span>(<span class="dt">digits =</span> <span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb147-26" data-line-number="26"><span class="st">  </span><span class="kw">adorn_totals</span>()</a>
<a class="sourceLine" id="cb147-27" data-line-number="27"></a>
<a class="sourceLine" id="cb147-28" data-line-number="28">counts &lt;-</a>
<a class="sourceLine" id="cb147-29" data-line-number="29"><span class="st">  </span>counts <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb147-30" data-line-number="30"><span class="st">  </span><span class="kw">rename</span>(<span class="st">`</span><span class="dt">Guessed gender</span><span class="st">`</span> =<span class="st"> &quot;.&quot;</span>,</a>
<a class="sourceLine" id="cb147-31" data-line-number="31">         <span class="dt">Number =</span> n,</a>
<a class="sourceLine" id="cb147-32" data-line-number="32">         <span class="dt">Percent =</span> percent)</a>
<a class="sourceLine" id="cb147-33" data-line-number="33"></a>
<a class="sourceLine" id="cb147-34" data-line-number="34">counts<span class="op">$</span><span class="st">`</span><span class="dt">Guessed gender</span><span class="st">`</span>[counts<span class="op">$</span><span class="st">`</span><span class="dt">Guessed gender</span><span class="st">`</span> <span class="op">==</span><span class="st"> &quot;female&quot;</span>] &lt;-<span class="st"> &quot;Female&quot;</span></a>
<a class="sourceLine" id="cb147-35" data-line-number="35">counts<span class="op">$</span><span class="st">`</span><span class="dt">Guessed gender</span><span class="st">`</span>[counts<span class="op">$</span><span class="st">`</span><span class="dt">Guessed gender</span><span class="st">`</span> <span class="op">==</span><span class="st"> &quot;male&quot;</span>] &lt;-<span class="st"> &quot;Male&quot;</span></a>
<a class="sourceLine" id="cb147-36" data-line-number="36">counts<span class="op">$</span><span class="st">`</span><span class="dt">Guessed gender</span><span class="st">`</span>[counts<span class="op">$</span><span class="st">`</span><span class="dt">Guessed gender</span><span class="st">`</span> <span class="op">==</span><span class="st"> &quot;unsure&quot;</span>] &lt;-<span class="st"> &quot;Unsure&quot;</span></a>
<a class="sourceLine" id="cb147-37" data-line-number="37"></a>
<a class="sourceLine" id="cb147-38" data-line-number="38"><span class="kw">write_csv</span>(counts, <span class="st">&quot;outputs/tables/counts.csv&quot;</span>)</a></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="case-study-gathering-and-tidying-data-from-paspaley.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lab-ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["test.pdf", "test.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
