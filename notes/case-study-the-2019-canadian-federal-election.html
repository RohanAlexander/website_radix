<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Case study - The 2019 Canadian Federal Election | Telling Stories with Data</title>
  <meta name="description" content="3 Case study - The 2019 Canadian Federal Election | Telling Stories with Data" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Case study - The 2019 Canadian Federal Election | Telling Stories with Data" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Case study - The 2019 Canadian Federal Election | Telling Stories with Data" />
  
  
  

<meta name="author" content="Rohan Alexander" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="lab-getting-started.html"/>
<link rel="next" href="communication.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>1</b> Overview</a><ul>
<li class="chapter" data-level="1.1" data-path="overview.html"><a href="overview.html#on-telling-stories"><i class="fa fa-check"></i><b>1.1</b> On telling stories</a></li>
<li class="chapter" data-level="1.2" data-path="overview.html"><a href="overview.html#telling-stories-with-data"><i class="fa fa-check"></i><b>1.2</b> Telling stories with data</a></li>
<li class="chapter" data-level="1.3" data-path="overview.html"><a href="overview.html#these-notes"><i class="fa fa-check"></i><b>1.3</b> These notes</a><ul>
<li class="chapter" data-level="1.3.1" data-path="overview.html"><a href="overview.html#software"><i class="fa fa-check"></i><b>1.3.1</b> Software</a></li>
<li class="chapter" data-level="1.3.2" data-path="overview.html"><a href="overview.html#assumed-background"><i class="fa fa-check"></i><b>1.3.2</b> Assumed background</a></li>
<li class="chapter" data-level="1.3.3" data-path="overview.html"><a href="overview.html#structure"><i class="fa fa-check"></i><b>1.3.3</b> Structure</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="overview.html"><a href="overview.html#acknowledgements"><i class="fa fa-check"></i><b>1.4</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.5" data-path="overview.html"><a href="overview.html#contact"><i class="fa fa-check"></i><b>1.5</b> Contact</a></li>
<li class="chapter" data-level="1.6" data-path="overview.html"><a href="overview.html#todos"><i class="fa fa-check"></i><b>1.6</b> TODOs</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="lab-getting-started.html"><a href="lab-getting-started.html"><i class="fa fa-check"></i><b>2</b> Lab - Getting started</a><ul>
<li class="chapter" data-level="2.1" data-path="lab-getting-started.html"><a href="lab-getting-started.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="lab-getting-started.html"><a href="lab-getting-started.html#tidyverse"><i class="fa fa-check"></i><b>2.2</b> Tidyverse</a><ul>
<li class="chapter" data-level="2.2.1" data-path="lab-getting-started.html"><a href="lab-getting-started.html#the-pipe"><i class="fa fa-check"></i><b>2.2.1</b> The pipe</a></li>
<li class="chapter" data-level="2.2.2" data-path="lab-getting-started.html"><a href="lab-getting-started.html#select"><i class="fa fa-check"></i><b>2.2.2</b> Select</a></li>
<li class="chapter" data-level="2.2.3" data-path="lab-getting-started.html"><a href="lab-getting-started.html#filter"><i class="fa fa-check"></i><b>2.2.3</b> Filter</a></li>
<li class="chapter" data-level="2.2.4" data-path="lab-getting-started.html"><a href="lab-getting-started.html#arrange"><i class="fa fa-check"></i><b>2.2.4</b> Arrange</a></li>
<li class="chapter" data-level="2.2.5" data-path="lab-getting-started.html"><a href="lab-getting-started.html#group_by"><i class="fa fa-check"></i><b>2.2.5</b> group_by</a></li>
<li class="chapter" data-level="2.2.6" data-path="lab-getting-started.html"><a href="lab-getting-started.html#mutate"><i class="fa fa-check"></i><b>2.2.6</b> Mutate</a></li>
<li class="chapter" data-level="2.2.7" data-path="lab-getting-started.html"><a href="lab-getting-started.html#summarise"><i class="fa fa-check"></i><b>2.2.7</b> Summarise</a></li>
<li class="chapter" data-level="2.2.8" data-path="lab-getting-started.html"><a href="lab-getting-started.html#counting-by-group"><i class="fa fa-check"></i><b>2.2.8</b> Counting by group</a></li>
<li class="chapter" data-level="2.2.9" data-path="lab-getting-started.html"><a href="lab-getting-started.html#calculate-proportions"><i class="fa fa-check"></i><b>2.2.9</b> Calculate proportions</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="lab-getting-started.html"><a href="lab-getting-started.html#ggplot"><i class="fa fa-check"></i><b>2.3</b> ggplot</a><ul>
<li class="chapter" data-level="2.3.1" data-path="lab-getting-started.html"><a href="lab-getting-started.html#main-features"><i class="fa fa-check"></i><b>2.3.1</b> Main features</a></li>
<li class="chapter" data-level="2.3.2" data-path="lab-getting-started.html"><a href="lab-getting-started.html#facets"><i class="fa fa-check"></i><b>2.3.2</b> Facets</a></li>
<li class="chapter" data-level="2.3.3" data-path="lab-getting-started.html"><a href="lab-getting-started.html#small-things"><i class="fa fa-check"></i><b>2.3.3</b> Small things</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="lab-getting-started.html"><a href="lab-getting-started.html#other"><i class="fa fa-check"></i><b>2.4</b> Other</a><ul>
<li class="chapter" data-level="2.4.1" data-path="lab-getting-started.html"><a href="lab-getting-started.html#case_when"><i class="fa fa-check"></i><b>2.4.1</b> case_when</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html"><i class="fa fa-check"></i><b>3</b> Case study - The 2019 Canadian Federal Election</a><ul>
<li class="chapter" data-level="3.1" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html#create-a-graph-based-on-the-2019-canadian-federal-election"><i class="fa fa-check"></i><b>3.2</b> Create a graph based on the 2019 Canadian Federal election</a><ul>
<li class="chapter" data-level="3.2.1" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html#getting-started"><i class="fa fa-check"></i><b>3.2.1</b> Getting started</a></li>
<li class="chapter" data-level="3.2.2" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html#reading-in-the-data"><i class="fa fa-check"></i><b>3.2.2</b> Reading in the data</a></li>
<li class="chapter" data-level="3.2.3" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html#clean-the-data"><i class="fa fa-check"></i><b>3.2.3</b> Clean the data</a></li>
<li class="chapter" data-level="3.2.4" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html#make-a-graph"><i class="fa fa-check"></i><b>3.2.4</b> Make a graph</a></li>
<li class="chapter" data-level="3.2.5" data-path="case-study-the-2019-canadian-federal-election.html"><a href="case-study-the-2019-canadian-federal-election.html#make-a-table"><i class="fa fa-check"></i><b>3.2.5</b> Make a table</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="communication.html"><a href="communication.html"><i class="fa fa-check"></i><b>4</b> Communication</a><ul>
<li class="chapter" data-level="4.1" data-path="communication.html"><a href="communication.html#introduction-2"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="communication.html"><a href="communication.html#title-abstract-and-introduction"><i class="fa fa-check"></i><b>4.2</b> Title, abstract, and introduction</a></li>
<li class="chapter" data-level="4.3" data-path="communication.html"><a href="communication.html#figures-tables-equations-and-technical-terms"><i class="fa fa-check"></i><b>4.3</b> Figures, tables, equations, and technical terms</a></li>
<li class="chapter" data-level="4.4" data-path="communication.html"><a href="communication.html#on-brevity"><i class="fa fa-check"></i><b>4.4</b> On brevity</a></li>
<li class="chapter" data-level="4.5" data-path="communication.html"><a href="communication.html#other-1"><i class="fa fa-check"></i><b>4.5</b> Other</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lab-using-r-in-practice.html"><a href="lab-using-r-in-practice.html"><i class="fa fa-check"></i><b>5</b> Lab - Using R in practice</a><ul>
<li class="chapter" data-level="5.1" data-path="lab-using-r-in-practice.html"><a href="lab-using-r-in-practice.html#introduction-3"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="lab-using-r-in-practice.html"><a href="lab-using-r-in-practice.html#getting-help"><i class="fa fa-check"></i><b>5.2</b> Getting help</a></li>
<li class="chapter" data-level="5.3" data-path="lab-using-r-in-practice.html"><a href="lab-using-r-in-practice.html#mentality"><i class="fa fa-check"></i><b>5.3</b> Mentality</a></li>
<li class="chapter" data-level="5.4" data-path="lab-using-r-in-practice.html"><a href="lab-using-r-in-practice.html#style"><i class="fa fa-check"></i><b>5.4</b> Style</a></li>
<li class="chapter" data-level="5.5" data-path="lab-using-r-in-practice.html"><a href="lab-using-r-in-practice.html#learning-more"><i class="fa fa-check"></i><b>5.5</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ethics.html"><a href="ethics.html"><i class="fa fa-check"></i><b>6</b> Ethics</a><ul>
<li class="chapter" data-level="6.1" data-path="ethics.html"><a href="ethics.html#introduction-4"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="ethics.html"><a href="ethics.html#questiontask"><i class="fa fa-check"></i><b>6.2</b> Question/task</a></li>
<li class="chapter" data-level="6.3" data-path="ethics.html"><a href="ethics.html#data"><i class="fa fa-check"></i><b>6.3</b> Data</a></li>
<li class="chapter" data-level="6.4" data-path="ethics.html"><a href="ethics.html#model"><i class="fa fa-check"></i><b>6.4</b> Model</a></li>
<li class="chapter" data-level="6.5" data-path="ethics.html"><a href="ethics.html#team"><i class="fa fa-check"></i><b>6.5</b> Team</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="reproducibility.html"><a href="reproducibility.html"><i class="fa fa-check"></i><b>7</b> Reproducibility</a><ul>
<li class="chapter" data-level="7.1" data-path="reproducibility.html"><a href="reproducibility.html#introduction-5"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="reproducibility.html"><a href="reproducibility.html#data-access"><i class="fa fa-check"></i><b>7.2</b> Data access</a></li>
<li class="chapter" data-level="7.3" data-path="reproducibility.html"><a href="reproducibility.html#on-mistakes"><i class="fa fa-check"></i><b>7.3</b> On mistakes</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lab-r-markdown-and-r-projects.html"><a href="lab-r-markdown-and-r-projects.html"><i class="fa fa-check"></i><b>8</b> Lab - R Markdown and R Projects</a><ul>
<li class="chapter" data-level="8.1" data-path="lab-r-markdown-and-r-projects.html"><a href="lab-r-markdown-and-r-projects.html#r-markdown"><i class="fa fa-check"></i><b>8.1</b> R Markdown</a><ul>
<li class="chapter" data-level="8.1.1" data-path="lab-r-markdown-and-r-projects.html"><a href="lab-r-markdown-and-r-projects.html#getting-started-1"><i class="fa fa-check"></i><b>8.1.1</b> Getting started</a></li>
<li class="chapter" data-level="8.1.2" data-path="lab-r-markdown-and-r-projects.html"><a href="lab-r-markdown-and-r-projects.html#basic-commands"><i class="fa fa-check"></i><b>8.1.2</b> Basic commands</a></li>
<li class="chapter" data-level="8.1.3" data-path="lab-r-markdown-and-r-projects.html"><a href="lab-r-markdown-and-r-projects.html#r-chunks"><i class="fa fa-check"></i><b>8.1.3</b> R chunks</a></li>
<li class="chapter" data-level="8.1.4" data-path="lab-r-markdown-and-r-projects.html"><a href="lab-r-markdown-and-r-projects.html#abstracts-and-pdf-outputs"><i class="fa fa-check"></i><b>8.1.4</b> Abstracts and PDF outputs</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="lab-r-markdown-and-r-projects.html"><a href="lab-r-markdown-and-r-projects.html#r-projects"><i class="fa fa-check"></i><b>8.2</b> R projects</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lab-git-and-docker.html"><a href="lab-git-and-docker.html"><i class="fa fa-check"></i><b>9</b> Lab - Git and Docker</a></li>
<li class="chapter" data-level="10" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html"><i class="fa fa-check"></i><b>10</b> Case study - TTC Subway Delays</a><ul>
<li class="chapter" data-level="10.1" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#introduction-6"><i class="fa fa-check"></i><b>10.1</b> Introduction</a><ul>
<li class="chapter" data-level="10.1.1" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#prerequesites"><i class="fa fa-check"></i><b>10.1.1</b> Prerequesites</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#finding-and-downloading-data-using-opendatatoronto"><i class="fa fa-check"></i><b>10.2</b> Finding and downloading data using <code>opendatatoronto</code></a><ul>
<li class="chapter" data-level="10.2.1" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#finding-the-data"><i class="fa fa-check"></i><b>10.2.1</b> Finding the data</a></li>
<li class="chapter" data-level="10.2.2" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#retrieving-the-data"><i class="fa fa-check"></i><b>10.2.2</b> Retrieving the data</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#plotting"><i class="fa fa-check"></i><b>10.3</b> Plotting</a><ul>
<li class="chapter" data-level="10.3.1" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#example-1-delays-by-line"><i class="fa fa-check"></i><b>10.3.1</b> Example 1: Delays by line</a></li>
<li class="chapter" data-level="10.3.2" data-path="case-study-ttc-subway-delays.html"><a href="case-study-ttc-subway-delays.html#example-2-delays-by-time-of-day"><i class="fa fa-check"></i><b>10.3.2</b> Example 2: Delays by time of day</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="problem-set-1.html"><a href="problem-set-1.html"><i class="fa fa-check"></i><b>11</b> Problem Set 1</a></li>
<li class="chapter" data-level="12" data-path="developing-research-questions.html"><a href="developing-research-questions.html"><i class="fa fa-check"></i><b>12</b> Developing research questions</a><ul>
<li class="chapter" data-level="12.1" data-path="developing-research-questions.html"><a href="developing-research-questions.html#developing-research-questions-1"><i class="fa fa-check"></i><b>12.1</b> Developing research questions</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="gathering-data.html"><a href="gathering-data.html"><i class="fa fa-check"></i><b>13</b> Gathering data</a><ul>
<li class="chapter" data-level="13.1" data-path="gathering-data.html"><a href="gathering-data.html#gathering-data-1"><i class="fa fa-check"></i><b>13.1</b> Gathering data</a><ul>
<li class="chapter" data-level="13.1.1" data-path="gathering-data.html"><a href="gathering-data.html#deliberately-available"><i class="fa fa-check"></i><b>13.1.1</b> Deliberately available</a></li>
<li class="chapter" data-level="13.1.2" data-path="gathering-data.html"><a href="gathering-data.html#by-product"><i class="fa fa-check"></i><b>13.1.2</b> By product</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="lab-the-tidyverse.html"><a href="lab-the-tidyverse.html"><i class="fa fa-check"></i><b>14</b> Lab - The Tidyverse</a></li>
<li class="chapter" data-level="15" data-path="case-study-gathering-and-tidying-data-from-paspaley.html"><a href="case-study-gathering-and-tidying-data-from-paspaley.html"><i class="fa fa-check"></i><b>15</b> Case study - Gathering and tidying data from Paspaley</a><ul>
<li class="chapter" data-level="15.1" data-path="case-study-gathering-and-tidying-data-from-paspaley.html"><a href="case-study-gathering-and-tidying-data-from-paspaley.html#introduction-7"><i class="fa fa-check"></i><b>15.1</b> Introduction</a></li>
<li class="chapter" data-level="15.2" data-path="case-study-gathering-and-tidying-data-from-paspaley.html"><a href="case-study-gathering-and-tidying-data-from-paspaley.html#data-acquisition"><i class="fa fa-check"></i><b>15.2</b> Data acquisition</a></li>
<li class="chapter" data-level="15.3" data-path="case-study-gathering-and-tidying-data-from-paspaley.html"><a href="case-study-gathering-and-tidying-data-from-paspaley.html#data-cleaning"><i class="fa fa-check"></i><b>15.3</b> Data cleaning</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="case-study-rohans-books.html"><a href="case-study-rohans-books.html"><i class="fa fa-check"></i><b>16</b> Case study - Rohan’s books</a><ul>
<li class="chapter" data-level="16.1" data-path="case-study-rohans-books.html"><a href="case-study-rohans-books.html#introduction-8"><i class="fa fa-check"></i><b>16.1</b> Introduction</a></li>
<li class="chapter" data-level="16.2" data-path="case-study-rohans-books.html"><a href="case-study-rohans-books.html#gather-data"><i class="fa fa-check"></i><b>16.2</b> Gather data</a></li>
<li class="chapter" data-level="16.3" data-path="case-study-rohans-books.html"><a href="case-study-rohans-books.html#data-parsing-and-cleaning"><i class="fa fa-check"></i><b>16.3</b> Data parsing and cleaning</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="lab-ggplot2.html"><a href="lab-ggplot2.html"><i class="fa fa-check"></i><b>17</b> Lab - ggplot2</a></li>
<li class="chapter" data-level="18" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>18</b> Exploratory data analysis</a><ul>
<li class="chapter" data-level="18.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#introduction-9"><i class="fa fa-check"></i><b>18.1</b> Introduction</a></li>
<li class="chapter" data-level="18.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#a-note-on-packages"><i class="fa fa-check"></i><b>18.2</b> A note on packages</a></li>
<li class="chapter" data-level="18.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#ttc-subway-delays"><i class="fa fa-check"></i><b>18.3</b> TTC subway delays</a></li>
<li class="chapter" data-level="18.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#eda-and-data-viz"><i class="fa fa-check"></i><b>18.4</b> EDA and data viz</a></li>
<li class="chapter" data-level="18.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#data-checks"><i class="fa fa-check"></i><b>18.5</b> Data checks</a><ul>
<li class="chapter" data-level="18.5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#sanity-checks"><i class="fa fa-check"></i><b>18.5.1</b> Sanity Checks</a></li>
<li class="chapter" data-level="18.5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#missing-values"><i class="fa fa-check"></i><b>18.5.2</b> Missing values</a></li>
<li class="chapter" data-level="18.5.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#duplicates"><i class="fa fa-check"></i><b>18.5.3</b> Duplicates?</a></li>
<li class="chapter" data-level="18.5.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#visualizing-distributions"><i class="fa fa-check"></i><b>18.5.4</b> Visualizing distributions</a></li>
<li class="chapter" data-level="18.5.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#visualizing-time-series"><i class="fa fa-check"></i><b>18.5.5</b> Visualizing time series</a></li>
<li class="chapter" data-level="18.5.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#visualizing-relationships"><i class="fa fa-check"></i><b>18.5.6</b> Visualizing relationships</a></li>
<li class="chapter" data-level="18.5.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#pca"><i class="fa fa-check"></i><b>18.5.7</b> PCA</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercises"><i class="fa fa-check"></i><b>18.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="case-study-historical-canadian-elections.html"><a href="case-study-historical-canadian-elections.html"><i class="fa fa-check"></i><b>19</b> Case study - Historical Canadian elections</a></li>
<li class="chapter" data-level="20" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>20</b> Linear regression</a><ul>
<li class="chapter" data-level="20.1" data-path="linear-regression.html"><a href="linear-regression.html#introduction-10"><i class="fa fa-check"></i><b>20.1</b> Introduction</a></li>
<li class="chapter" data-level="20.2" data-path="linear-regression.html"><a href="linear-regression.html#competing-relationships"><i class="fa fa-check"></i><b>20.2</b> Competing relationships</a></li>
<li class="chapter" data-level="20.3" data-path="linear-regression.html"><a href="linear-regression.html#implementing-this-in-r"><i class="fa fa-check"></i><b>20.3</b> Implementing this in R</a></li>
<li class="chapter" data-level="20.4" data-path="linear-regression.html"><a href="linear-regression.html#tidy-up-with-broom"><i class="fa fa-check"></i><b>20.4</b> Tidy up with broom</a></li>
<li class="chapter" data-level="20.5" data-path="linear-regression.html"><a href="linear-regression.html#testing-hypothesis"><i class="fa fa-check"></i><b>20.5</b> Testing hypothesis</a></li>
<li class="chapter" data-level="20.6" data-path="linear-regression.html"><a href="linear-regression.html#adding-more-and-varied-explanatory-variables"><i class="fa fa-check"></i><b>20.6</b> Adding more and varied explanatory variables</a></li>
<li class="chapter" data-level="20.7" data-path="linear-regression.html"><a href="linear-regression.html#threats-to-validity-and-aspects-to-think-about"><i class="fa fa-check"></i><b>20.7</b> Threats to validity and aspects to think about</a></li>
<li class="chapter" data-level="20.8" data-path="linear-regression.html"><a href="linear-regression.html#more-credible-outputs"><i class="fa fa-check"></i><b>20.8</b> More credible outputs</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="lab-reporting-regression-results.html"><a href="lab-reporting-regression-results.html"><i class="fa fa-check"></i><b>21</b> Lab - Reporting regression results</a></li>
<li class="chapter" data-level="22" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html"><i class="fa fa-check"></i><b>22</b> Case study - Opinions about a casino in Toronto</a><ul>
<li class="chapter" data-level="22.1" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#data-preparation"><i class="fa fa-check"></i><b>22.1</b> Data preparation</a><ul>
<li class="chapter" data-level="22.1.1" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#getting-data-from-opendatatoronto"><i class="fa fa-check"></i><b>22.1.1</b> Getting data from <code>opendatatoronto</code></a></li>
<li class="chapter" data-level="22.1.2" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#getting-the-right-kind-of-object"><i class="fa fa-check"></i><b>22.1.2</b> Getting the right kind of object</a></li>
<li class="chapter" data-level="22.1.3" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#cleaning-up-the-dataframe"><i class="fa fa-check"></i><b>22.1.3</b> Cleaning up the dataframe</a></li>
</ul></li>
<li class="chapter" data-level="22.2" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#some-visual-exploration-and-more-cleanup-of-course"><i class="fa fa-check"></i><b>22.2</b> Some visual exploration (and more cleanup, of course)</a><ul>
<li class="chapter" data-level="22.2.1" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#getting-the-data-into-a-more-model-suitable-format"><i class="fa fa-check"></i><b>22.2.1</b> Getting the data into a more model-suitable format</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#logistic-regression"><i class="fa fa-check"></i><b>22.3</b> Logistic Regression</a><ul>
<li class="chapter" data-level="22.3.1" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#interpretation"><i class="fa fa-check"></i><b>22.3.1</b> Interpretation</a></li>
<li class="chapter" data-level="22.3.2" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#baseline-category"><i class="fa fa-check"></i><b>22.3.2</b> Baseline category</a></li>
<li class="chapter" data-level="22.3.3" data-path="case-study-opinions-about-a-casino-in-toronto.html"><a href="case-study-opinions-about-a-casino-in-toronto.html#making-estimates"><i class="fa fa-check"></i><b>22.3.3</b> Making estimates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html"><i class="fa fa-check"></i><b>23</b> Case study - Airbnb listing in Toronto</a><ul>
<li class="chapter" data-level="23.1" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#essentials"><i class="fa fa-check"></i><b>23.1</b> Essentials</a></li>
<li class="chapter" data-level="23.2" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#set-up"><i class="fa fa-check"></i><b>23.2</b> Set up</a></li>
<li class="chapter" data-level="23.3" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#get-data"><i class="fa fa-check"></i><b>23.3</b> Get data</a></li>
<li class="chapter" data-level="23.4" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#clean-data"><i class="fa fa-check"></i><b>23.4</b> Clean data</a><ul>
<li class="chapter" data-level="23.4.1" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#price"><i class="fa fa-check"></i><b>23.4.1</b> Price</a></li>
<li class="chapter" data-level="23.4.2" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#superhosts"><i class="fa fa-check"></i><b>23.4.2</b> Superhosts</a></li>
<li class="chapter" data-level="23.4.3" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#reviews"><i class="fa fa-check"></i><b>23.4.3</b> Reviews</a></li>
<li class="chapter" data-level="23.4.4" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#response-time"><i class="fa fa-check"></i><b>23.4.4</b> Response time</a></li>
<li class="chapter" data-level="23.4.5" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#host-number-of-listings"><i class="fa fa-check"></i><b>23.4.5</b> Host number of listings</a></li>
<li class="chapter" data-level="23.4.6" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#decisions"><i class="fa fa-check"></i><b>23.4.6</b> Decisions</a></li>
</ul></li>
<li class="chapter" data-level="23.5" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#explore-data"><i class="fa fa-check"></i><b>23.5</b> Explore data</a><ul>
<li class="chapter" data-level="23.5.1" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#price-and-reviews"><i class="fa fa-check"></i><b>23.5.1</b> Price and reviews</a></li>
<li class="chapter" data-level="23.5.2" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#superhost-and-response-time"><i class="fa fa-check"></i><b>23.5.2</b> Superhost and response-time</a></li>
<li class="chapter" data-level="23.5.3" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#neighbourhood"><i class="fa fa-check"></i><b>23.5.3</b> Neighbourhood</a></li>
</ul></li>
<li class="chapter" data-level="23.6" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#model-data"><i class="fa fa-check"></i><b>23.6</b> Model data</a><ul>
<li class="chapter" data-level="23.6.1" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#logistic-regression-1"><i class="fa fa-check"></i><b>23.6.1</b> Logistic regression</a></li>
</ul></li>
<li class="chapter" data-level="23.7" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#next-steps"><i class="fa fa-check"></i><b>23.7</b> Next steps</a></li>
<li class="chapter" data-level="23.8" data-path="case-study-airbnb-listing-in-toronto.html"><a href="case-study-airbnb-listing-in-toronto.html#references"><i class="fa fa-check"></i><b>23.8</b> References</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="ab-testing-and-rcts.html"><a href="ab-testing-and-rcts.html"><i class="fa fa-check"></i><b>24</b> A/B testing and RCTs</a><ul>
<li class="chapter" data-level="24.1" data-path="ab-testing-and-rcts.html"><a href="ab-testing-and-rcts.html#introduction-11"><i class="fa fa-check"></i><b>24.1</b> Introduction</a></li>
<li class="chapter" data-level="24.2" data-path="ab-testing-and-rcts.html"><a href="ab-testing-and-rcts.html#motivation"><i class="fa fa-check"></i><b>24.2</b> Motivation</a></li>
<li class="chapter" data-level="24.3" data-path="ab-testing-and-rcts.html"><a href="ab-testing-and-rcts.html#tea-party"><i class="fa fa-check"></i><b>24.3</b> Tea party</a></li>
<li class="chapter" data-level="24.4" data-path="ab-testing-and-rcts.html"><a href="ab-testing-and-rcts.html#some-unexpected-properties-from-randomised-sampling"><i class="fa fa-check"></i><b>24.4</b> Some unexpected properties from randomised sampling</a></li>
<li class="chapter" data-level="24.5" data-path="ab-testing-and-rcts.html"><a href="ab-testing-and-rcts.html#anova"><i class="fa fa-check"></i><b>24.5</b> ANOVA</a></li>
<li class="chapter" data-level="24.6" data-path="ab-testing-and-rcts.html"><a href="ab-testing-and-rcts.html#treatment-and-control"><i class="fa fa-check"></i><b>24.6</b> Treatment and control</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="matching-difference-in-differences.html"><a href="matching-difference-in-differences.html"><i class="fa fa-check"></i><b>25</b> Matching &amp; difference-in-differences</a><ul>
<li class="chapter" data-level="25.1" data-path="matching-difference-in-differences.html"><a href="matching-difference-in-differences.html#introduction-12"><i class="fa fa-check"></i><b>25.1</b> Introduction</a></li>
<li class="chapter" data-level="25.2" data-path="matching-difference-in-differences.html"><a href="matching-difference-in-differences.html#motivation-1"><i class="fa fa-check"></i><b>25.2</b> Motivation</a></li>
<li class="chapter" data-level="25.3" data-path="matching-difference-in-differences.html"><a href="matching-difference-in-differences.html#example"><i class="fa fa-check"></i><b>25.3</b> Example</a></li>
<li class="chapter" data-level="25.4" data-path="matching-difference-in-differences.html"><a href="matching-difference-in-differences.html#assumptions"><i class="fa fa-check"></i><b>25.4</b> Assumptions</a></li>
<li class="chapter" data-level="25.5" data-path="matching-difference-in-differences.html"><a href="matching-difference-in-differences.html#matching"><i class="fa fa-check"></i><b>25.5</b> Matching</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><a href="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><i class="fa fa-check"></i><b>26</b> Case study - Lower advertising revenue reduced French newspaper prices between 1960 and 1974</a><ul>
<li class="chapter" data-level="26.1" data-path="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><a href="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html#introduction-13"><i class="fa fa-check"></i><b>26.1</b> Introduction</a></li>
<li class="chapter" data-level="26.2" data-path="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><a href="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html#background"><i class="fa fa-check"></i><b>26.2</b> Background</a></li>
<li class="chapter" data-level="26.3" data-path="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><a href="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html#data-1"><i class="fa fa-check"></i><b>26.3</b> Data</a></li>
<li class="chapter" data-level="26.4" data-path="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><a href="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html#model-1"><i class="fa fa-check"></i><b>26.4</b> Model</a></li>
<li class="chapter" data-level="26.5" data-path="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><a href="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html#results"><i class="fa fa-check"></i><b>26.5</b> Results</a></li>
<li class="chapter" data-level="26.6" data-path="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html"><a href="case-study-lower-advertising-revenue-reduced-french-newspaper-prices-between-1960-and-1974.html#other-points"><i class="fa fa-check"></i><b>26.6</b> Other points</a></li>
</ul></li>
<li class="chapter" data-level="27" data-path="shiny-applications.html"><a href="shiny-applications.html"><i class="fa fa-check"></i><b>27</b> Shiny applications</a></li>
<li class="chapter" data-level="28" data-path="regression-discontinuity-design.html"><a href="regression-discontinuity-design.html"><i class="fa fa-check"></i><b>28</b> Regression discontinuity design</a></li>
<li class="chapter" data-level="29" data-path="introduction-14.html"><a href="introduction-14.html"><i class="fa fa-check"></i><b>29</b> Introduction</a></li>
<li class="chapter" data-level="30" data-path="instrumental-variables.html"><a href="instrumental-variables.html"><i class="fa fa-check"></i><b>30</b> Instrumental variables</a></li>
<li class="chapter" data-level="" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Telling Stories with Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="case-study---the-2019-canadian-federal-election" class="section level1">
<h1><span class="header-section-number">3</span> Case study - The 2019 Canadian Federal Election</h1>
<p><strong>This case study is heavily based on code originally written by Sharla Gelfand. Sharla’s original presentation is available <a href="https://sharla.party/talk/2019-10-24-uoft-brown-bag/">here</a>. Thank you to Sharla for giving permission to re-use this code.</strong></p>
<p><strong>Required reading</strong></p>
<ul>
<li>Wickham, Hadley, and Garrett Grolemund, 2017, ‘R for Data Science’, Chapter 3, freely available at: <a href="https://r4ds.had.co.nz/" class="uri">https://r4ds.had.co.nz/</a>.</li>
<li>Gelfand, Sharla, 2019, ‘Cleaning up after the federal election’, freely available at: <a href="https://sharla.party/talk/2019-10-24-uoft-brown-bag/" class="uri">https://sharla.party/talk/2019-10-24-uoft-brown-bag/</a>.</li>
</ul>
<p><strong>Recommended reading</strong></p>
<ul>
<li>Alexander, Monica, 2019, ‘The concentration and uniqueness of baby names in Australia and the US’, freely available at: <a href="https://www.monicaalexander.com/posts/2019-20-01-babynames/" class="uri">https://www.monicaalexander.com/posts/2019-20-01-babynames/</a>.</li>
<li>Brody, Howard, Michael Russell Rip, Peter Vinten-Johansen, Nigel Paneth, and Stephen Rachman, 2000, ‘Map-making and myth-making in Broad Street: the London cholera epidemic, 1854’, <em>The Lancet</em>, 356, no. 9223, pp. 64-68.</li>
<li>Hvitfeldt, Emil, 2020, ‘Emoji in ggplot2’, freely available at: <a href="https://www.hvitfeldt.me/blog/real-emojis-in-ggplot2/" class="uri">https://www.hvitfeldt.me/blog/real-emojis-in-ggplot2/</a>.</li>
<li>Pavlik, Kaylin, 2018, ‘Dairy Queen Deserts in Minnesota’, freely available at: <a href="https://www.kaylinpavlik.com/dairy-queen-deserts/" class="uri">https://www.kaylinpavlik.com/dairy-queen-deserts/</a>.</li>
<li>Rogers, Simon, 2013, ‘John Snow’s data journalism: the cholera map that changed the world’, freely available at: <a href="https://www.theguardian.com/news/datablog/2013/mar/15/john-snow-cholera-map" class="uri">https://www.theguardian.com/news/datablog/2013/mar/15/john-snow-cholera-map</a>.</li>
<li>Scherer, Cédric, 2019, ‘Best TidyTuesday 2019’, freely available at: <a href="https://cedricscherer.netlify.com/2019/12/30/best-tidytuesday-2019/" class="uri">https://cedricscherer.netlify.com/2019/12/30/best-tidytuesday-2019/</a>.</li>
<li>Silge, Julia, 2019, ‘Reordering and facetting for ggplot2’, freely available at: <a href="https://juliasilge.com/blog/reorder-within/" class="uri">https://juliasilge.com/blog/reorder-within/</a>.</li>
<li>Smale, David, 2020, ‘Daniel Johnston’, freely available at: <a href="https://davidsmale.netlify.com/portfolio/daniel-johnston/" class="uri">https://davidsmale.netlify.com/portfolio/daniel-johnston/</a>.</li>
<li>Smale, David, 2019, ‘Happy Days’, freely available at: <a href="https://davidsmale.netlify.com/portfolio/happy-days/" class="uri">https://davidsmale.netlify.com/portfolio/happy-days/</a>.</li>
</ul>
<p><strong>Key libraries</strong></p>
<ul>
<li><code>ggplot2</code></li>
<li><code>here</code></li>
<li><code>janitor</code></li>
<li><code>skimr</code></li>
<li><code>tidyverse</code></li>
</ul>
<p><strong>Key functions</strong></p>
<ul>
<li><code>%&gt;%</code></li>
<li><code>clean_names()</code></li>
<li><code>pivot_longer()</code></li>
<li><code>skim()</code></li>
</ul>
<div id="introduction-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Introduction</h2>
<p>This case study introduces how to make graphs and tables. Some of the code may be a bit unfamiliar to you if it’s your first time using R. Don’t worry. It’ll all soon be familiar. But the only way to learn how to code is to code. Please try to get this working on your own computer, typing out (not copy/pasting) all the code that you need.</p>
<p>One of the great things about graphs and tables is that sometimes this is all you need to have a convincing story (Figures <a href="case-study-the-2019-canadian-federal-election.html#fig:snowexamplemap">3.1</a>, <a href="case-study-the-2019-canadian-federal-election.html#fig:football">3.2</a>).</p>
<div class="figure"><span id="fig:snowexamplemap"></span>
<img src="figures/snow-cholera-map.jpg" alt="A famous example where a map helped identify the cause of Cholera" width="90%" />
<p class="caption">
Figure 3.1: A famous example where a map helped identify the cause of Cholera
</p>
</div>
<p>Source: By John Snow - Published by C.F. Cheffins, Lith, Southhampton Buildings, London, England, 1854 in Snow, John. On the Mode of Communication of Cholera, 2nd Ed, John Churchill, New Burlington Street, London, England, 1855.</p>
<div class="figure"><span id="fig:football"></span>
<img src="figures/financial_times.png" alt="How footballers measure against athletes in major US sports" width="90%" />
<p class="caption">
Figure 3.2: How footballers measure against athletes in major US sports
</p>
</div>
<p>Source: Ganesh, Janan, 2020, ‘Will Liverpool’s machine football conquer America?’, Financial Times, 21 February 2020, available at: <a href="https://www.ft.com/content/d61f94ba-53cb-11ea-8841-482eed0038b1" class="uri">https://www.ft.com/content/d61f94ba-53cb-11ea-8841-482eed0038b1</a>, via <a href="https://twitter.com/jburnmurdoch/status/1230767022176227331?s=21">John Burn-Murdoch</a>.</p>
<p>In this case study we are going to focus on making a table and a graph from our data. Although you will be guided thoroughly to achieve this, hopefully by seeing the power of quantitative analysis with R you will be motivated to stick with it when you run into difficulties later on.</p>
</div>
<div id="create-a-graph-based-on-the-2019-canadian-federal-election" class="section level2">
<h2><span class="header-section-number">3.2</span> Create a graph based on the 2019 Canadian Federal election</h2>
<div id="getting-started" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Getting started</h3>
<p>To get started you should open a new R Markdown file (File -&gt; New File -&gt; R Markdown). As this is our first attempt at using R in the wild, we will just have everything in the one R Markdown document. (In later projects we will move to a more robust set-up.) Then you should create a new R code chunk (command + option + i) and add some preamble documentation. I like to specify the purpose of the document, who the author is and their contact details, when the file was written or last updated, and pre-requisites that the file relies on. You may also like to include a license, and list outstanding issues or todos. Remember that in R, lines that start with ‘#’ are comments - they won’t run.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" data-line-number="1"><span class="co">#### Preamble ####</span></a>
<a class="sourceLine" id="cb83-2" data-line-number="2"><span class="co"># Purpose: Read in voting data from the 2019 Canadian Election and output a </span></a>
<a class="sourceLine" id="cb83-3" data-line-number="3"><span class="co"># dataset that can be used for analysis.</span></a>
<a class="sourceLine" id="cb83-4" data-line-number="4"><span class="co"># Author: Rohan Alexander</span></a>
<a class="sourceLine" id="cb83-5" data-line-number="5"><span class="co"># Email: rohan.alexander@utoronto.ca</span></a>
<a class="sourceLine" id="cb83-6" data-line-number="6"><span class="co"># Date: 9 January 2019</span></a>
<a class="sourceLine" id="cb83-7" data-line-number="7"><span class="co"># Prerequisites: Need the text file from the Canadian elections website</span></a>
<a class="sourceLine" id="cb83-8" data-line-number="8"><span class="co"># Issues: </span></a>
<a class="sourceLine" id="cb83-9" data-line-number="9"><span class="co"># To do:</span></a></code></pre></div>
<p>After this I typically set-up my workspace. This usually involves installing and/or reading in any packages, and possibly updating them. Remember that you only need to install a package once for each computer. But you need to call it every time you want to use it. (Here I’ve added excessive comments so that you know what is going on and why - in general I wouldn’t explain what tidyverse is.)</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1"><span class="co">#### Workspace set-up ####</span></a>
<a class="sourceLine" id="cb84-2" data-line-number="2"><span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>) <span class="co"># Only need to do this once</span></a>
<a class="sourceLine" id="cb84-3" data-line-number="3"><span class="co"># tidyverse is a collection of packages</span></a>
<a class="sourceLine" id="cb84-4" data-line-number="4"><span class="co"># Try ?tidyverse to see more</span></a>
<a class="sourceLine" id="cb84-5" data-line-number="5"><span class="kw">library</span>(tidyverse) <span class="co"># Calls the tidyverse - need to do this each time.</span></a>
<a class="sourceLine" id="cb84-6" data-line-number="6"><span class="kw">install.packages</span>(<span class="st">&quot;janitor&quot;</span>) <span class="co"># Only need to do this once</span></a>
<a class="sourceLine" id="cb84-7" data-line-number="7"><span class="kw">library</span>(janitor) <span class="co"># janitor helps us clean datasets</span></a>
<a class="sourceLine" id="cb84-8" data-line-number="8"><span class="kw">install.packages</span>(<span class="st">&quot;here&quot;</span>) </a>
<a class="sourceLine" id="cb84-9" data-line-number="9"><span class="kw">library</span>(here) <span class="co"># here helps us to know where files are</span></a>
<a class="sourceLine" id="cb84-10" data-line-number="10"><span class="kw">install.packages</span>(<span class="st">&quot;skimr&quot;</span>) </a>
<a class="sourceLine" id="cb84-11" data-line-number="11"><span class="kw">library</span>(skimr) <span class="co"># skimr is handy to give a quick overview of your dataset</span></a>
<a class="sourceLine" id="cb84-12" data-line-number="12"><span class="co"># update.packages() # You can uncomment this if you want to update your packages. </span></a></code></pre></div>
</div>
<div id="reading-in-the-data" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Reading in the data</h3>
<p>We read in the dataset from the Elections Canada website. We can actually pass a website to the <code>read_tsv()</code> function, which saves a lot of time.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" data-line-number="1"><span class="co">#### Read in the data ####</span></a>
<a class="sourceLine" id="cb85-2" data-line-number="2"><span class="co"># Read in the data using read_tsv from the readr package (part of the tidyverse)</span></a>
<a class="sourceLine" id="cb85-3" data-line-number="3"><span class="co"># The &lt;- is assing the output of readr::read_tsv to a object called raw_data. </span></a>
<a class="sourceLine" id="cb85-4" data-line-number="4">raw_<span class="dv">2019</span>_elections_data &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_tsv</span>(<span class="dt">file =</span> <span class="st">&quot;http://enr.elections.ca/DownloadResults.aspx&quot;</span>,</a>
<a class="sourceLine" id="cb85-5" data-line-number="5">                            <span class="dt">skip =</span> <span class="dv">1</span>) </a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   `Electoral district number - Numéro de la circonscription` = col_double(),
##   `Electoral district name` = col_character(),
##   `Nom de la circonscription` = col_character(),
##   `Type of results*` = col_character(),
##   `Type de résultats**` = col_character(),
##   `Surname - Nom de famille` = col_character(),
##   `Middle name(s) - Autre(s) prénom(s)` = col_logical(),
##   `Given name - Prénom` = col_character(),
##   `Political affiliation` = col_character(),
##   `Appartenance politique` = col_character(),
##   `Votes obtained - Votes obtenus` = col_double(),
##   `% Votes obtained - Votes obtenus %` = col_double(),
##   `Rejected ballots - Bulletins rejetés***` = col_double(),
##   `Total number of ballots cast - Nombre total de votes déposés` = col_double()
## )</code></pre>
<pre><code>## Warning: 3 parsing failures.
##  row                                                      col expected                                                                                                                                                                                                                                                                                                                       actual                                           file
## 4293 Electoral district number - Numéro de la circonscription a double *Type of results: preliminary results are unofficial results from election night; validated results are official results validated by each returning officer; judicially certified results are official results validated by a judge following a judicial recount.                                                           &#39;http://enr.elections.ca/DownloadResults.aspx&#39;
## 4294 Electoral district number - Numéro de la circonscription a double **Type de résultats : les résultats préliminaires sont les résultats non officiels du soir d&#39;élection; les résultats validés sont les résultats officiels validés par le directeur du scrutin; les résultats de dépouillement judiciaire sont les résultats officiels validés par un juge après un dépouillement judiciaire. &#39;http://enr.elections.ca/DownloadResults.aspx&#39;
## 4295 Electoral district number - Numéro de la circonscription a double ***The rejected ballots count is not available for the preliminary results. / Le nombre de bulletins de vote rejetés n&#39;est pas disponible pour les résultats préliminaires.                                                                                                                                                  &#39;http://enr.elections.ca/DownloadResults.aspx&#39;</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" data-line-number="1"><span class="co"># There is some debris on the first line so we skip them.</span></a>
<a class="sourceLine" id="cb88-2" data-line-number="2"><span class="co"># We have read the data from the Elections Canada website. We may like to save </span></a>
<a class="sourceLine" id="cb88-3" data-line-number="3"><span class="co"># it just in case something happens and they move it. </span></a>
<a class="sourceLine" id="cb88-4" data-line-number="4"><span class="kw">write_csv</span>(raw_<span class="dv">2019</span>_elections_data, <span class="kw">here</span>(<span class="st">&quot;notes/inputs/data/canadian_2019_voting.csv&quot;</span>))</a></code></pre></div>
</div>
<div id="clean-the-data" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Clean the data</h3>
<p>Now we’d like to clean the data so that we can use it.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" data-line-number="1"><span class="co">#### Basic cleaning ####</span></a>
<a class="sourceLine" id="cb89-2" data-line-number="2">raw_<span class="dv">2019</span>_elections_data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">here</span>(<span class="st">&quot;notes/inputs/data/canadian_2019_voting.csv&quot;</span>))</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   `Electoral district number - Numéro de la circonscription` = col_double(),
##   `Electoral district name` = col_character(),
##   `Nom de la circonscription` = col_character(),
##   `Type of results*` = col_character(),
##   `Type de résultats**` = col_character(),
##   `Surname - Nom de famille` = col_character(),
##   `Middle name(s) - Autre(s) prénom(s)` = col_logical(),
##   `Given name - Prénom` = col_character(),
##   `Political affiliation` = col_character(),
##   `Appartenance politique` = col_character(),
##   `Votes obtained - Votes obtenus` = col_double(),
##   `% Votes obtained - Votes obtenus %` = col_double(),
##   `Rejected ballots - Bulletins rejetés***` = col_double(),
##   `Total number of ballots cast - Nombre total de votes déposés` = col_double()
## )</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" data-line-number="1"><span class="co"># If you called the library (as we did) then you don&#39;t need to use this set-up </span></a>
<a class="sourceLine" id="cb91-2" data-line-number="2"><span class="co"># of janitor::clean_names, you could just use clean_names, but I&#39;m making it </span></a>
<a class="sourceLine" id="cb91-3" data-line-number="3"><span class="co"># explicit here, but won&#39;t in the future.</span></a>
<a class="sourceLine" id="cb91-4" data-line-number="4">cleaned_<span class="dv">2019</span>_elections_data &lt;-<span class="st"> </span>janitor<span class="op">::</span><span class="kw">clean_names</span>(raw_<span class="dv">2019</span>_elections_data)</a>
<a class="sourceLine" id="cb91-5" data-line-number="5"><span class="co"># One thing to notice for those who have a stata background is that we just </span></a>
<a class="sourceLine" id="cb91-6" data-line-number="6"><span class="co"># overwrote the name - that&#39;s fine in R.</span></a>
<a class="sourceLine" id="cb91-7" data-line-number="7"></a>
<a class="sourceLine" id="cb91-8" data-line-number="8"><span class="co"># The pipe operator - %&gt;% - pushes the output from one line to be an input to the </span></a>
<a class="sourceLine" id="cb91-9" data-line-number="9"><span class="co"># next line.</span></a>
<a class="sourceLine" id="cb91-10" data-line-number="10">cleaned_<span class="dv">2019</span>_elections_data &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb91-11" data-line-number="11"><span class="st">  </span>cleaned_<span class="dv">2019</span>_elections_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb91-12" data-line-number="12"><span class="st">  </span><span class="co"># Filter to only have certain rows</span></a>
<a class="sourceLine" id="cb91-13" data-line-number="13"><span class="st">  </span><span class="kw">filter</span>(type_of_results <span class="op">==</span><span class="st"> &quot;validated&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb91-14" data-line-number="14"><span class="st">  </span><span class="co"># Select only certain columns</span></a>
<a class="sourceLine" id="cb91-15" data-line-number="15"><span class="st">  </span><span class="kw">select</span>(electoral_district_number_numero_de_la_circonscription,</a>
<a class="sourceLine" id="cb91-16" data-line-number="16">         electoral_district_name,</a>
<a class="sourceLine" id="cb91-17" data-line-number="17">         political_affiliation,</a>
<a class="sourceLine" id="cb91-18" data-line-number="18">         surname_nom_de_famille,</a>
<a class="sourceLine" id="cb91-19" data-line-number="19">         percent_votes_obtained_votes_obtenus_percent</a>
<a class="sourceLine" id="cb91-20" data-line-number="20">         ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb91-21" data-line-number="21"><span class="st">  </span><span class="co"># Rename the columns to be a bit shorter</span></a>
<a class="sourceLine" id="cb91-22" data-line-number="22"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">riding_number =</span> electoral_district_number_numero_de_la_circonscription,</a>
<a class="sourceLine" id="cb91-23" data-line-number="23">         <span class="dt">riding =</span> electoral_district_name,</a>
<a class="sourceLine" id="cb91-24" data-line-number="24">         <span class="dt">party =</span> political_affiliation,</a>
<a class="sourceLine" id="cb91-25" data-line-number="25">         <span class="dt">surname =</span> surname_nom_de_famille,</a>
<a class="sourceLine" id="cb91-26" data-line-number="26">         <span class="dt">votes =</span> percent_votes_obtained_votes_obtenus_percent)</a></code></pre></div>
<p>Finally we may like to save our cleaned dataset.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1"><span class="co">#### Save ####</span></a>
<a class="sourceLine" id="cb92-2" data-line-number="2">readr<span class="op">::</span><span class="kw">write_csv</span>(cleaned_<span class="dv">2019</span>_elections_data, </a>
<a class="sourceLine" id="cb92-3" data-line-number="3">                 <span class="kw">here</span>(<span class="st">&quot;notes/outputs/data/cleaned_canadian_2019_voting.csv&quot;</span>))</a></code></pre></div>
</div>
<div id="make-a-graph" class="section level3">
<h3><span class="header-section-number">3.2.4</span> Make a graph</h3>
<p>First we need to read in the dataset, when then filter the number of parties to a smaller number, and filter to only ridings in Ontario.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" data-line-number="1"><span class="co">#### Read in the data ####</span></a>
<a class="sourceLine" id="cb93-2" data-line-number="2">cleaned_<span class="dv">2019</span>_elections_data &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb93-3" data-line-number="3"><span class="st">  </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="kw">here</span>(<span class="st">&quot;notes/outputs/data/cleaned_canadian_2019_voting.csv&quot;</span>))</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   riding_number = col_double(),
##   riding = col_character(),
##   party = col_character(),
##   surname = col_character(),
##   votes = col_double()
## )</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" data-line-number="1"><span class="co"># Make a graph just considers Toronto riding</span></a>
<a class="sourceLine" id="cb95-2" data-line-number="2">toronto_ridings &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Beaches--East York&quot;</span>, <span class="st">&quot;Davenport&quot;</span>, <span class="st">&quot;Don Valley East&quot;</span>, <span class="st">&quot;Don Valley North&quot;</span>, <span class="st">&quot;Don Valley West&quot;</span>, <span class="st">&quot;Eglinton--Lawrence&quot;</span>, <span class="st">&quot;Etobicoke Centre&quot;</span>, <span class="st">&quot;Etobicoke North&quot;</span>, <span class="st">&quot;Etobicoke--Lakeshore&quot;</span>, <span class="st">&quot;Humber River--Black Creek&quot;</span>, <span class="st">&quot;Parkdale--High Park&quot;</span>, <span class="st">&quot;Scarborough Centre&quot;</span>, <span class="st">&quot;Scarborough North&quot;</span>, <span class="st">&quot;Scarborough Southwest&quot;</span>, <span class="st">&quot;Scarborough--Agincourt&quot;</span>, <span class="st">&quot;Scarborough--Guildwood&quot;</span>, <span class="st">&quot;Scarborough--Rouge Park&quot;</span>, <span class="st">&quot;Spadina--Fort York&quot;</span>, <span class="st">&quot;Toronto Centre&quot;</span>, <span class="st">&quot;Toronto--Danforth&quot;</span>, <span class="st">&quot;Toronto--St. Paul&#39;s&quot;</span>, <span class="st">&quot;University--Rosedale&quot;</span>, <span class="st">&quot;Willowdale&quot;</span>, <span class="st">&quot;York Centre&quot;</span>, <span class="st">&quot;York South--Weston&quot;</span>)</a>
<a class="sourceLine" id="cb95-3" data-line-number="3"></a>
<a class="sourceLine" id="cb95-4" data-line-number="4">cleaned_<span class="dv">2019</span>_elections_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb95-5" data-line-number="5"><span class="st">  </span><span class="kw">filter</span>(party <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Bloc Québécois&quot;</span>, </a>
<a class="sourceLine" id="cb95-6" data-line-number="6">                      <span class="st">&quot;Conservative&quot;</span>, </a>
<a class="sourceLine" id="cb95-7" data-line-number="7">                      <span class="st">&quot;Liberal&quot;</span>,</a>
<a class="sourceLine" id="cb95-8" data-line-number="8">                      <span class="st">&quot;NDP-New Democratic Party&quot;</span>)</a>
<a class="sourceLine" id="cb95-9" data-line-number="9">  ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb95-10" data-line-number="10"><span class="st">  </span><span class="kw">filter</span>(riding_number <span class="op">&gt;</span><span class="st"> </span><span class="dv">35000</span>,</a>
<a class="sourceLine" id="cb95-11" data-line-number="11">         riding_number <span class="op">&lt;</span><span class="st"> </span><span class="dv">36000</span>,</a>
<a class="sourceLine" id="cb95-12" data-line-number="12">  ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb95-13" data-line-number="13"><span class="st">  </span><span class="kw">filter</span>(riding <span class="op">%in%</span><span class="st"> </span>toronto_ridings) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb95-14" data-line-number="14"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> riding, <span class="dt">y =</span> votes, <span class="dt">color =</span> party)) <span class="op">+</span></a>
<a class="sourceLine" id="cb95-15" data-line-number="15"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb95-16" data-line-number="16"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span><span class="st"> </span><span class="co"># Make the theme neater</span></a>
<a class="sourceLine" id="cb95-17" data-line-number="17"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>)) <span class="op">+</span><span class="st"> </span><span class="co"># Change the angle</span></a>
<a class="sourceLine" id="cb95-18" data-line-number="18"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Toronto riding&quot;</span>,</a>
<a class="sourceLine" id="cb95-19" data-line-number="19">       <span class="dt">y =</span> <span class="st">&quot;Votes (%)&quot;</span>,</a>
<a class="sourceLine" id="cb95-20" data-line-number="20">       <span class="dt">color =</span> <span class="st">&quot;Party&quot;</span>)</a></code></pre></div>
<p><img src="notes_files/figure-html/unnamed-chunk-49-1.png" width="672" /></p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" data-line-number="1"><span class="co"># Save the graph</span></a>
<a class="sourceLine" id="cb96-2" data-line-number="2"><span class="kw">ggsave</span>(<span class="kw">here</span>(<span class="st">&quot;notes/outputs/figures/toronto_results.pdf&quot;</span>), <span class="dt">width =</span> <span class="dv">40</span>, <span class="dt">height =</span> <span class="dv">20</span>, <span class="dt">units =</span> <span class="st">&quot;cm&quot;</span>)</a></code></pre></div>
</div>
<div id="make-a-table" class="section level3">
<h3><span class="header-section-number">3.2.5</span> Make a table</h3>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" data-line-number="1"><span class="co">#### Read in the data ####</span></a>
<a class="sourceLine" id="cb97-2" data-line-number="2">cleaned_<span class="dv">2019</span>_elections_data &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb97-3" data-line-number="3"><span class="st">  </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="kw">here</span>(<span class="st">&quot;notes/outputs/data/cleaned_canadian_2019_voting.csv&quot;</span>))</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   riding_number = col_double(),
##   riding = col_character(),
##   party = col_character(),
##   surname = col_character(),
##   votes = col_double()
## )</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" data-line-number="1"><span class="co">#### Make some tables ####</span></a>
<a class="sourceLine" id="cb99-2" data-line-number="2"><span class="co"># Try some different default summary table</span></a>
<a class="sourceLine" id="cb99-3" data-line-number="3"><span class="kw">summary</span>(cleaned_<span class="dv">2019</span>_elections_data)</a></code></pre></div>
<pre><code>##  riding_number      riding             party             surname         
##  Min.   :10001   Length:2146        Length:2146        Length:2146       
##  1st Qu.:24051   Class :character   Class :character   Class :character  
##  Median :35056   Mode  :character   Mode  :character   Mode  :character  
##  Mean   :35584                                                           
##  3rd Qu.:47007                                                           
##  Max.   :62001                                                           
##      votes      
##  Min.   : 0.00  
##  1st Qu.: 1.50  
##  Median : 7.80  
##  Mean   :15.75  
##  3rd Qu.:26.48  
##  Max.   :85.50</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" data-line-number="1">skimr<span class="op">::</span><span class="kw">skim</span>(cleaned_<span class="dv">2019</span>_elections_data)</a></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-50">Table 3.1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">cleaned_2019_elections_da…</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">2146</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">5</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">riding</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">50</td>
<td align="right">0</td>
<td align="right">338</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">party</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">29</td>
<td align="right">0</td>
<td align="right">23</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">surname</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">20</td>
<td align="right">0</td>
<td align="right">1804</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">riding_number</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">35584.21</td>
<td align="right">13406.13</td>
<td align="right">10001</td>
<td align="right">24051.0</td>
<td align="right">35056.0</td>
<td align="right">47007.00</td>
<td align="right">62001.0</td>
<td align="left">▂▆▇▅▃</td>
</tr>
<tr class="even">
<td align="left">votes</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">15.75</td>
<td align="right">17.89</td>
<td align="right">0</td>
<td align="right">1.5</td>
<td align="right">7.8</td>
<td align="right">26.48</td>
<td align="right">85.5</td>
<td align="left">▇▂▂▁▁</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" data-line-number="1"><span class="co"># Make our own</span></a>
<a class="sourceLine" id="cb102-2" data-line-number="2">cleaned_<span class="dv">2019</span>_elections_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb102-3" data-line-number="3"><span class="st">  </span><span class="co"># Using group_by and summarise means that whatever summary statistics we </span></a>
<a class="sourceLine" id="cb102-4" data-line-number="4"><span class="st">  </span><span class="co"># construct will be on a party basis. We could group_by multiple variables and</span></a>
<a class="sourceLine" id="cb102-5" data-line-number="5"><span class="st">  </span><span class="co"># similarly, we could create a bunch of different other summary statistics.</span></a>
<a class="sourceLine" id="cb102-6" data-line-number="6"><span class="st">  </span><span class="kw">group_by</span>(party) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb102-7" data-line-number="7"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">min =</span> <span class="kw">min</span>(votes),</a>
<a class="sourceLine" id="cb102-8" data-line-number="8">            <span class="dt">mean =</span> <span class="kw">mean</span>(votes),</a>
<a class="sourceLine" id="cb102-9" data-line-number="9">            <span class="dt">max =</span> <span class="kw">max</span>(votes))</a></code></pre></div>
<pre><code>## # A tibble: 23 x 4
##    party                         min   mean   max
##    &lt;chr&gt;                       &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
##  1 Animal Protection Party       0.3  0.447   0.7
##  2 Bloc Québécois                4   32.1    58.2
##  3 CFF - Canada&#39;s Fourth Front   0.1  0.186   0.3
##  4 Christian Heritage Party      0.2  0.737   3.3
##  5 Communist                     0.1  0.24    0.7
##  6 Conservative                  2.3 34.0    85.5
##  7 Green Party                   1.3  6.46   49.1
##  8 Independent                   0.1  1.16   32.6
##  9 Liberal                       4.1 33.5    62.2
## 10 Libertarian                   0.3  0.604   2.4
## # … with 13 more rows</code></pre>
<p>The <code>skim</code> function from the <code>skimr</code> package is just a quick way of looking at the data. It can be handy when you get a new dataset to quickly come to terms with it. The p0, p25, p50, etc, values that it provides are percentiles. So for instance, P50 is the 50th percentile which means that 50 per cent of the data are below this, and 50 per cent are above i.e. the median. P0 should be the minimum, and p100 should be the maximum. The middle ones are similarly defined, so p25, means that 25 per cent of the data are below this point and 75 per cent of it is above this point. The general idea of both the percentiles and the histogram is to give you a quick idea of how skewed your data is.</p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lab-getting-started.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="communication.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"search": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
